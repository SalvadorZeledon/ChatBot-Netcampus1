<div id="nc-bot" class="nc" style="font-family: system-ui,Arial;">
  <section id="view-chat" class="view active" aria-hidden="false">
  <div class="nc-card">
    <strong class="nc-header"><img src="logo2.jpg" alt="Logo" class="nc-logo" width="36" height="36" style="margin-right: 10px;">Chatbot de Prueba - Unidad TAC</strong>

    <div class="nc-toolbar">
      <button id="nc-theme" class="nc-theme-btn" type="button" aria-pressed="false" title="Cambiar tema">
        üåô Modo oscuro
      </button>
      <button id="toFaq" class="nc-theme-btn" type="button" title="Ir a Preguntas frecuentes">‚ùì Preguntas frecuentes</button>
    </div>


    <div id="nc-msgs" class="nc-msgs"></div>
    <div id="nc-quick" class="nc-quick">
      <button class="nc-chip" data-q="¬øPuedes comentarme en qu√© consiste el nuevo proyecto de la Unidad TAC?">Proyecto TAC</button>
      <button class="nc-chip" data-q="¬øCu√°ndo inicia y cu√°ndo termina el ciclo 02-2025?">Calendario</button>
      <button class="nc-chip" data-q="¬øCu√°les son las pol√≠ticas de evaluaci√≥n?">Pol√≠ticas</button>
     <button class="nc-chip" data-q="¬øTienes un video para matriculaci√≥n?">Video matriculaci√≥n</button>
    </div>

    <div id="nc-form" class="nc-form" style="position:relative">
      <input id="nc-input" class="nc-input" type="text" placeholder="Escribe tu pregunta‚Ä¶" required autocomplete="off">
      <button id="nc-send" class="nc-send" type="button">Enviar</button>
      <div id="chat-suggestions" class="nc-suggest-list" style="display:none"></div>
    </div>
  </div>
  </section>

  <section id="view-faq" class="view" aria-hidden="true">
  <header class="faq-header">
    <div class="faq-wrap faq-toolbar">
      <div class="faq-header-left">
        <img src="logo2.jpg" alt="Logo" class="nc-logo" width="40" height="40">
        <h2 class="faq-title" id="faqTitle" tabindex="-1"><span>Preguntas Frecuentes</span></h2>
      </div>
      <div class="faq-header-right">
        <button id="backToBot" class="back-btn" type="button" title="Volver al chatbot">‚Üê Volver al Chatbot</button>
        <button id="themeToggleFaq" class="back-btn" type="button" title="Cambiar tema">üåô</button>
      </div>
    </div>
  </header>

  <div class="faq-search">
    <input type="text" id="searchInput" placeholder="Buscar preguntas..." autocomplete="off" />
    <div id="questions-suggestions" style="position:absolute;top:100%;left:0;right:0;background:#fff;border:2px solid #1f57b6;border-radius:8px;max-height:300px;overflow-y:auto;z-index:99999;display:none;box-shadow:0 8px 25px rgba(0,0,0,.2)"></div>
  </div>

  <div class="faq-wrap faq-pills">
    <button class="pill" onclick="showSection('estudiante')">Estudiante</button>
    <button class="pill" onclick="showSection('docente')">Docente</button>
  </div>
  <div class="faq-wrap faq-actions">
    <button id="expandAllBtn" class="pill">Expandir Todo</button>
    <button id="collapseAllBtn" class="pill">Contraer Todo</button>
  </div>

  <div id="estudiante" class="section active">
    <h2 style="text-align:center;margin-top:0">Secci√≥n para Estudiantes</h2>
    <details>
            <summary>1. ¬øC√≥mo modificar tu perfil?</summary>
            <div class="answer">
                <ul>
                    <li>Inicia sesi√≥n en la plataforma.</li>
                    <li>Haz clic en tu nombre o tu foto en la esquina superior.</li>
                    <li>Selecciona Perfil.</li>
                    <li>En la p√°gina de tu perfil, pulsa en Editar perfil.</li>
                    <li>Podr√°s cambiar: nombre, apellidos, direcci√≥n de correo, descripci√≥n personal, idioma preferido, etc.</li>
                    <li>Una vez hechos los cambios, selecciona Guardar cambios.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>2. ¬øC√≥mo a√±adir una foto a tu perfil?</summary>
            <div class="answer">
                <ul>
                    <li>Accede a tu perfil como en el paso anterior.</li>
                    <li>En Editar perfil, busca la secci√≥n Imagen del usuario.</li>
                    <li>Arrastra y suelta tu foto en el √°rea designada o selecciona Agregar archivo.</li>
                    <li>Haz clic en Guardar cambios.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>3. ¬øC√≥mo recuperar la contrase√±a?</summary>
            <div class="answer">
                <ul>
                    <li>En la pantalla de inicio de sesi√≥n, selecciona la opci√≥n ¬øOlvid√≥ su nombre de usuario o contrase√±a?</li>
                    <li>Ingresa tu direcci√≥n de correo registrada o tu nombre de usuario.</li>
                    <li>Recibir√°s un mensaje de correo con un enlace para restablecer la contrase√±a.</li>
                    <li>Haz clic en el enlace y crea una nueva clave de acceso.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>4. ¬øC√≥mo puedo auto matricularme en un curso?</summary>
            <div class="answer">
                <ul>
                    <li>Inicia sesi√≥n en Sinapsis.</li>
                    <li>Ve al listado de cursos disponibles.</li>
                    <li>Haz clic en el curso al que deseas unirte.</li>
                    <li>Si el curso tiene activada la auto-matriculaci√≥n, aparecer√° un bot√≥n "Matricularme".</li>
                    <li>Si se requiere una clave de acceso, introd√∫cela y confirma.</li>
                    <li>Una vez matriculado, el curso aparecer√° en tu p√°gina principal.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>5. ¬øC√≥mo puedo matricularme si el curso tiene clave?</summary>
            <div class="answer">
                <ul>
                    <li>Inicia sesi√≥n en Sinapsis.</li>
                    <li>Ve al listado de cursos disponibles.</li>
                    <li>Haz clic en el curso al que deseas unirte.</li>
                    <li>Si el curso tiene clave, dir√≠gete a la p√°gina de la "Universidad de Sonsonate", ve a servicios y busca "Horarios de Claves de Sinapsis y Teams".</li>
                    <li>Ingresa en esa secci√≥n y busca por d√≠a la clave de la materia que necesitas.</li>
                    <li>Regresa a Sinapsis y introduce la clave de acceso y confirma.</li>
                    <li>Una vez matriculado, el curso aparecer√° en tu p√°gina principal.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>6. ¬øD√≥nde puedo ver la descripci√≥n de un curso?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa a la p√°gina principal del curso.</li>
                    <li>La descripci√≥n del curso se encuentra en la parte superior o en la secci√≥n inicial.</li>
                    <li>All√≠ ver√°s los objetivos, criterios de evaluaci√≥n y actividades programadas.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>7. ¬øC√≥mo participo en un foro?</summary>
            <div class="answer">
                <ul>
                    <li>Dentro del curso, localiza la actividad Foro.</li>
                    <li>Haz clic en el t√≠tulo del foro.</li>
                    <li>Selecciona un tema ya existente o pulsa "A√±adir un nuevo tema de discusi√≥n".</li>
                    <li>Escribe el asunto y tu mensaje.</li>
                    <li>Puedes adjuntar archivos o im√°genes.</li>
                    <li>Haz clic en "Enviar al foro".</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>8. ¬øD√≥nde veo mis calificaciones?</summary>
            <div class="answer">
                <ul>
                    <li>En el curso, abre el men√∫ lateral.</li>
                    <li>Haz clic en "Calificaciones".</li>
                    <li>Se mostrar√° la libreta de calificaciones con tus tareas, cuestionarios y la retroalimentaci√≥n del profesor.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>9. ¬øC√≥mo recibo notificaciones y retroalimentaci√≥n?</summary>
            <div class="answer">
                <ul>
                    <li>Revisa la campana de notificaciones en la barra superior.</li>
                    <li>Ah√≠ ver√°s avisos de nuevas tareas, calificaciones o mensajes.</li>
                    <li>Tambi√©n puedes activar notificaciones por correo electr√≥nico o SMS desde tu perfil ‚Üí Preferencias ‚Üí Preferencias de Notificaciones.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>10. ¬øC√≥mo puedo ordenar mis cursos?</summary>
            <div class="answer">
                <ul>
                    <li>Ve a la p√°gina principal de tu √°rea personal.</li>
                    <li>En la secci√≥n "Mis cursos", usa las opciones de ordenamiento.</li>
                    <li>Selecciona ordenar por fecha de inicio o alfab√©ticamente.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>11. ¬øQu√© significa que un curso muestre fechas como "Hoy / Ma√±ana / Ayer"?</summary>
            <div class="answer">
                <ul>
                    <li>En Moodle 5.0, las fechas de las actividades y eventos aparecen con un formato natural:</li>
                    <li>Hoy: actividades que vencen en el mismo d√≠a.</li>
                    <li>Ma√±ana: pr√≥ximas actividades.</li>
                    <li>Ayer: actividades pasadas.</li>
                    <li>Esto facilita la comprensi√≥n del calendario.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>12. ¬øC√≥mo consultar mis entregas y penalizaciones por retraso?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa a tu curso.</li>
                    <li>Dir√≠gete a la secci√≥n Tareas o Actividades.</li>
                    <li>Haz clic en la tarea que deseas revisar.</li>
                    <li>Ver√°s tu fecha de entrega, el estado de la entrega y cualquier retroalimentaci√≥n del docente.</li>
                    <li>Si hubo retraso en la entrega, Moodle mostrar√° las penalizaciones aplicadas autom√°ticamente seg√∫n la configuraci√≥n de la tarea.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>13. ¬øC√≥mo puedo hacer que los contenidos H5P se reproduzcan autom√°ticamente en la app m√≥vil de Moodle?</summary>
            <div class="answer">
                <ul>
                    <li>Abrir la actividad H5P dentro de la app.</li>
                    <li>Algunos tipos de contenido H5P, como videos interactivos, permiten configurar la reproducci√≥n autom√°tica desde el editor H5P en el navegador web.</li>
                    <li>Una vez configurada, al abrir el contenido desde la app m√≥vil, comenzar√° autom√°ticamente la reproducci√≥n si la actividad lo permite.</li>
                    <li>Nota: No todos los contenidos H5P admiten reproducci√≥n autom√°tica en dispositivos m√≥viles debido a restricciones del navegador y la app.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>14. ¬øC√≥mo entregar tareas (con l√≠mite de 20 MB)?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa al curso y selecciona la actividad Tarea.</li>
                    <li>Lee las instrucciones y verifica la fecha l√≠mite.</li>
                    <li>Haz clic en Agregar entrega.</li>
                    <li>Adjunta el archivo desde tu computadora (m√°ximo 20 MB, seg√∫n configuraci√≥n del curso).</li>
                    <li>Haz clic en Guardar cambios.</li>
                    <li>Si lo deseas, selecciona Enviar tarea para confirmarla de forma definitiva.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
        <details>
            <summary>15. ¬øC√≥mo resolver cuestionarios (ex√°menes virtuales)?</summary>
            <div class="answer">
                <ul>
                    <li>Entra al curso y selecciona el cuestionario.</li>
                    <li>Lee la informaci√≥n inicial: fecha de apertura, tiempo l√≠mite y n√∫mero de intentos.</li>
                    <li>Haz clic en Intentar resolver el cuestionario ahora.</li>
                    <li>Responde cada pregunta siguiendo las indicaciones (opci√≥n m√∫ltiple, verdadero/falso, ensayo, etc.).</li>
                    <li>Al finalizar, selecciona Finalizar intento.</li>
                    <li>Revisa tus respuestas y luego confirma con Enviar todo y terminar.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>16. ¬øC√≥mo usar Moodle en mi dispositivo m√≥vil?</summary>
            <div class="answer">
                <ul>
                    <li>Descargar la app: Busca "Moodle" en Google Play Store (Android) o App Store (iOS).</li>
                    <li>Iniciar sesi√≥n: Ingresa la URL de tu universidad y usa tus mismas credenciales de NetCampus.</li>
                    <li>Funcionalidades: Ver cursos y actividades pendientes, descargar materiales para ver sin conexi√≥n, recibir notificaciones push, participar en foros y entregar tareas peque√±as.</li>
                    <li>L√≠mites: No puedes crear actividades desde la app (solo visualizar), algunos contenidos H5P pueden no funcionar en m√≥vil, para ex√°menes largos se recomienda usar computadora.</li>
                    <li>Consejo: Activa "Ver sin conexi√≥n" en los cursos que quieras acceder sin internet.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=moodle_movil" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>17. ¬øC√≥mo descargar materiales para usar sin conexi√≥n?</summary>
            <div class="answer">
                <ul>
                    <li>Desde la web: Entra al curso, localiza el material, haz clic derecho en el enlace y selecciona "Guardar enlace como...".</li>
                    <li>Desde la app m√≥vil: Abre el curso, toca el icono ‚ãÆ (m√°s opciones) junto al nombre del curso y selecciona "Descargar para offline".</li>
                    <li>Materiales que funcionan offline: Documentos PDF, Word, Excel, im√°genes, videos descargados directamente, p√°ginas HTML est√°ticas.</li>
                    <li>Qu√© NO funciona offline: Cuestionarios y actividades interactivas, foros y discusiones, contenidos H5P complejos, calificaciones y retroalimentaci√≥n.</li>
                    <li>Organizaci√≥n: Usa carpetas por curso y fecha para encontrar r√°pido tus materiales.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
  </div>

  <div id="docente" class="section">
    <h2 style="text-align:center;margin-top:0">Secci√≥n para Docentes</h2>
    <details>
            <summary>1. ¬øC√≥mo activar la automatr√≠cula en un curso?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa al curso donde quieres habilitar la automatr√≠cula.</li>
                    <li>En el men√∫ del curso selecciona Participantes.</li>
                    <li>Haz clic en el men√∫ desplegable y elige M√©todos de inscripci√≥n.</li>
                    <li>Ver√°s una lista de m√©todos disponibles. Localiza Automatr√≠cula y act√≠valo haciendo clic en el √≠cono del "ojo" para que quede visible.</li>
                    <li>Para configurarlo, selecciona el √≠cono de ajustes junto a "Automatr√≠cula".</li>
                    <li>Define si deseas usar una clave de inscripci√≥n (contrase√±a de acceso).</li>
                    <li>Ajusta la duraci√≥n de la matr√≠cula, fecha de inicio o fin, n√∫mero m√°ximo de usuarios y mensajes de bienvenida.</li>
                    <li>Guarda los cambios.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>2. ¬øC√≥mo matricular usuarios manualmente en un curso?</summary>
            <div class="answer">
                <ul>
                    <li>Entra al curso.</li>
                    <li>Ve a la secci√≥n Participantes.</li>
                    <li>En el men√∫, selecciona M√©todos de inscripci√≥n.</li>
                    <li>Comprueba que el m√©todo Matr√≠cula manual est√© activo (√≠cono de ojo abierto).</li>
                    <li>Haz clic en Matricular usuarios.</li>
                    <li>Selecciona a las personas que deseas inscribir.</li>
                    <li>Asigna un rol (por ejemplo, estudiante).</li>
                    <li>Si lo deseas, establece una duraci√≥n de la matr√≠cula o fecha de inicio y fin.</li>
                    <li>Confirma con Matricular usuarios seleccionados.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>3. ¬øC√≥mo a√±adir la descripci√≥n del curso?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa al curso y haz clic en Configuraci√≥n del curso.</li>
                    <li>Dentro del apartado General, localiza el campo Descripci√≥n.</li>
                    <li>Escribe un resumen claro que explique los objetivos, contenidos y metodolog√≠a del curso.</li>
                    <li>Si lo deseas, adjunta archivos o im√°genes de apoyo.</li>
                    <li>Guarda los cambios.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>4. ¬øC√≥mo configurar la calificaci√≥n del curso?</summary>
            <div class="answer">
                <ul>
                    <li>Entra al curso y abre el men√∫ Calificaciones.</li>
                    <li>Haz clic en Ajustes de la calificaci√≥n del curso.</li>
                    <li>Aqu√≠ puedes:</li>
                    <li>Organizar categor√≠as (por ejemplo: ex√°menes, tareas, participaci√≥n).</li>
                    <li>Definir el peso de cada actividad.</li>
                    <li>Ajustar el m√©todo de c√°lculo (suma de calificaciones, media ponderada, etc.).</li>
                    <li>Guarda los cambios.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>5. ¬øC√≥mo crear una tarea?</summary>
            <div class="answer">
                <ul>
                    <li>Entra al curso y activa la edici√≥n.</li>
                    <li>En la secci√≥n donde quieras colocar la tarea, haz clic en A√±adir una actividad o recurso.</li>
                    <li>Selecciona Tarea y pulsa Agregar.</li>
                    <li>Completa los campos: nombre de la tarea, descripci√≥n e instrucciones.</li>
                    <li>Configura fechas de inicio y entrega.</li>
                    <li>Establece el tama√±o m√°ximo de archivo (ejemplo: 20 MB).</li>
                    <li>Ajusta la calificaci√≥n (puntuaci√≥n m√°xima, categor√≠as).</li>
                    <li>Guarda y regresa al curso.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>6. ¬øC√≥mo redactar preguntas generadoras para foros de discusi√≥n?</summary>
            <div class="answer">
                <ul>
                    <li>Activar la edici√≥n. En tu curso, haz clic en el √≠cono de engranaje y selecciona Activar edici√≥n.</li>
                    <li>A√±adir una actividad. Haz clic en A√±adir una actividad o un recurso en la secci√≥n donde quieras colocar el foro.</li>
                    <li>Seleccionar el tipo de actividad. En la ventana emergente, elige la pesta√±a Actividades y selecciona Foro.</li>
                    <li>Configurar el foro:</li>
                    <li>Nombre del foro: Asigna un t√≠tulo claro.</li>
                    <li>Descripci√≥n: Aqu√≠ puedes incluir las instrucciones, las reglas de participaci√≥n y las preguntas generadoras que iniciar√°n el debate.</li>
                    <li>Tipo de foro: Despliega las opciones y selecciona Debate sencillo.</li>
                    <li>Ajustar la disponibilidad, fechas de entrega y l√≠mite.</li>
                    <li>Configurar adjuntos y recuento de palabras.</li>
                    <li>Establecer modalidad de suscripci√≥n (Suscripci√≥n forzosa si quieres participaci√≥n obligatoria).</li>
                    <li>Configurar evaluaci√≥n y calificaci√≥n.</li>
                    <li>Guardar los cambios.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>7. ¬øC√≥mo reutilizar cursos (Importaci√≥n)?</summary>
            <div class="answer">
                <ul>
                    <li>Abre dos ventanas del navegador. En una, abre el curso viejo que contiene toda la informaci√≥n. En la segunda, abre el curso nuevo que est√° vac√≠o.</li>
                    <li>Inicia la importaci√≥n en el curso nuevo. Ve a la opci√≥n de m√°s y busca "Reutilizaci√≥n de Curso" en la parte superior derecha y haz clic en Reutilizaci√≥n de curso. Luego, selecciona Importar.</li>
                    <li>Busca el curso a importar. Regresa a la ventana del curso viejo. Busca y copia el c√≥digo de la asignatura m√°s la sesi√≥n (por ejemplo, ADM-3200-01).</li>
                    <li>Pega este c√≥digo en la barra de b√∫squeda del curso nuevo y haz clic en Buscar.</li>
                    <li>Selecciona el curso. Aseg√∫rate de que el resultado de la b√∫squeda coincida con el curso viejo. Selecci√≥nalo y haz clic en Continuar.</li>
                    <li>Ajusta los elementos a copiar. Moodle te mostrar√° una lista de todos los elementos del curso viejo. Por defecto, todo estar√° seleccionado. Desmarca aquellos que no quieras copiar y haz clic en Siguiente.</li>
                    <li>Confirma la importaci√≥n. Revisa la lista final. Moodle marcar√° en verde lo que se copiar√° y en rojo lo que no. Si todo es correcto, haz clic en Realizar la importaci√≥n.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>8. ¬øC√≥mo puedo crear una actividad H5P en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa al curso y activa el modo edici√≥n.</li>
                    <li>Haz clic en A√±adir actividad o recurso.</li>
                    <li>Selecciona Contenido interactivo H5P y haz clic en Agregar.</li>
                    <li>Escribe un nombre para la actividad y agrega el contenido H5P desde el editor H5P o sube un archivo existente.</li>
                    <li>Configura opciones como calificaci√≥n, intentos y restricciones de acceso.</li>
                    <li>Guarda los cambios y la actividad estar√° disponible para los estudiantes.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>9. ¬øC√≥mo puedo revitalizar o reiniciar un curso en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Ve al curso y selecciona M√°s ‚Üí Reutilizaci√≥n de curso ‚Üí Reiniciar curso.</li>
                    <li>Elige los elementos que deseas reiniciar: calificaciones, actividades, usuarios matriculados, foros, etc.</li>
                    <li>Confirma la acci√≥n. Esto dejar√° el curso listo para un nuevo ciclo sin perder su estructura.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>10. ¬øC√≥mo puedo dise√±ar y aplicar cuestionarios en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Activa el modo edici√≥n y selecciona A√±adir actividad o recurso ‚Üí Cuestionario.</li>
                    <li>Define nombre, descripci√≥n y par√°metros de tiempo, intentos y calificaci√≥n.</li>
                    <li>Agrega preguntas desde el banco de preguntas o crea nuevas (opci√≥n m√∫ltiple, verdadero/falso, respuesta corta, etc.).</li>
                    <li>Publica el cuestionario y los estudiantes podr√°n responder seg√∫n las fechas y configuraciones establecidas.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>11. ¬øC√≥mo puedo filtrar las entregas que ya he calificado en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa a la tarea y haz clic en Ver todas las entregas.</li>
                    <li>Utiliza los filtros para mostrar √∫nicamente:</li>
                    <li>Entregas calificadas</li>
                    <li>Entregas pendientes</li>
                    <li>Entregas con retraso</li>
                    <li>Esto te permite gestionar f√°cilmente las calificaciones y revisiones.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>12. ¬øC√≥mo configuro penalizaciones por entregas tard√≠as en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Al crear o editar una tarea, busca la secci√≥n Entrega o configuraciones.</li>
                    <li>Activa la opci√≥n Fecha l√≠mite y selecciona la penalizaci√≥n por retraso.</li>
                    <li>Moodle aplicar√° autom√°ticamente un porcentaje de descuento en la calificaci√≥n si la entrega se realiza despu√©s de la fecha l√≠mite.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>13. ¬øC√≥mo puedo crear un cuestionario en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa al curso donde deseas crear el cuestionario.</li>
                    <li>Activa el modo edici√≥n haciendo clic en Activar edici√≥n.</li>
                    <li>En la secci√≥n donde quieres agregar el cuestionario, haz clic en A√±adir actividad o recurso.</li>
                    <li>Selecciona Cuestionario y haz clic en Agregar.</li>
                    <li>Completa los campos principales:</li>
                    <li>Nombre del cuestionario: t√≠tulo visible para los estudiantes.</li>
                    <li>Descripci√≥n: instrucciones o informaci√≥n sobre el cuestionario.</li>
                    <li>Configura las opciones de disponibilidad y tiempo:</li>
                    <li>Fecha de apertura y cierre del cuestionario.</li>
                    <li>Tiempo l√≠mite para responder.</li>
                    <li>N√∫mero de intentos permitidos.</li>
                    <li>Configura calificaci√≥n y retroalimentaci√≥n:</li>
                    <li>Escala o puntaje m√°ximo.</li>
                    <li>Tipo de calificaci√≥n (promedio de intentos, calificaci√≥n m√°s alta, etc.).</li>
                    <li>Guarda los cambios y vuelve al cuestionario.</li>
                    <li>Haz clic en Editar cuestionario para agregar preguntas:</li>
                    <li>Puedes crear nuevas preguntas (opci√≥n m√∫ltiple, verdadero/falso, respuesta corta, etc.).</li>
                    <li>O seleccionar preguntas existentes desde el banco de preguntas del curso.</li>
                    <li>Una vez agregadas las preguntas, ajusta el orden y la puntuaci√≥n de cada una.</li>
                    <li>Guarda los cambios y publica el cuestionario.</li>
                    <li>Los estudiantes podr√°n acceder al cuestionario seg√∫n la fecha de apertura y las restricciones que configuraste.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>14. ¬øC√≥mo puedo pre-crear intentos de cuestionarios en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa al curso y abre el cuestionario que deseas configurar.</li>
                    <li>Ve a configuraci√≥n ‚Üí Calificaci√≥n ‚Üí Intentos permitidos.</li>
                    <li>Configura el n√∫mero m√°ximo de intentos que cada estudiante podr√° realizar.</li>
                    <li>Si deseas que ciertos intentos ya est√©n pre-creados para an√°lisis o pruebas, puedes utilizar la opci√≥n Simular intentos desde el cuestionario.</li>
                    <li>Confirma los cambios. Esto permitir√° que los estudiantes tengan los intentos listos seg√∫n la configuraci√≥n, y tambi√©n podr√°s visualizar resultados de prueba.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>15. ¬øC√≥mo gestiono el banco de preguntas en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa al curso y ve a Banco de preguntas ‚Üí Preguntas en el men√∫ de administraci√≥n.</li>
                    <li>Crear una pregunta:</li>
                    <li>Haz clic en Agregar ‚Üí Tipo de pregunta (opci√≥n m√∫ltiple, verdadero/falso, etc.).</li>
                    <li>Completa el enunciado, las opciones de respuesta y la calificaci√≥n.</li>
                    <li>Guarda los cambios.</li>
                    <li>Duplicar una pregunta:</li>
                    <li>Selecciona la pregunta que deseas duplicar.</li>
                    <li>Haz clic en Duplicar, luego ajusta el contenido seg√∫n necesites y guarda.</li>
                    <li>Filtrar preguntas:</li>
                    <li>Utiliza los filtros por categor√≠a, tipo o palabras clave para encontrar preguntas espec√≠ficas r√°pidamente.</li>
                    <li>Compartir preguntas:</li>
                    <li>Selecciona las preguntas deseadas.</li>
                    <li>Haz clic en Exportar y elige el formato (Moodle XML, GIFT, etc.).</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>16. ¬øC√≥mo puedo a√±adir descripciones largas a im√°genes en Moodle 5.0 para mejorar la accesibilidad?</summary>
            <div class="answer">
                <ul>
                    <li>Al agregar o editar una imagen en cualquier actividad o recurso, haz clic en la imagen dentro del editor de texto.</li>
                    <li>Busca la opci√≥n Propiedades de la imagen ‚Üí Texto alternativo y escribe un resumen breve.</li>
                    <li>Para descripciones largas, haz clic en Descripci√≥n larga o Long description (dependiendo del editor).</li>
                    <li>Escribe un detalle completo sobre la imagen, explicando su contenido y contexto.</li>
                    <li>Guarda los cambios.</li>
                    <li>Esto permite que los lectores de pantalla describan correctamente la imagen, cumpliendo normas de accesibilidad.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>17. ¬øC√≥mo puedo configurar plantillas de respaldos en Moodle 5.0?</summary>
            <div class="answer">
                <ul>
                    <li>Ingresa al curso y ve a m√°s ‚Üí Reutilizaci√≥n de curso ‚Üí Copia de seguridad.</li>
                    <li>Define los elementos que deseas incluir en el respaldo: actividades, bloques, calificaciones, usuarios, filtros, etc.</li>
                    <li>Guarda la plantilla con un nombre identificativo.</li>
                    <li>Ahora podr√°s usar esta plantilla para generar respaldos r√°pidos del curso sin necesidad de configurar cada opci√≥n nuevamente.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>18. ¬øQu√© son las etiquetas y c√≥mo usarlas?</summary>
            <div class="answer">
                <ul>
                    <li>Las etiquetas en Moodle son un recurso que permite a√±adir texto, im√°genes, videos o enlaces directamente en la p√°gina del curso.</li>
                    <li>Para insertarlas:</li>
                    <li>Activa la edici√≥n en el curso.</li>
                    <li>Haz clic en A√±adir una actividad o recurso en la secci√≥n deseada.</li>
                    <li>Selecciona √Årea de texto y medios.</li>
                    <li>Escribe el contenido: puede ser un t√≠tulo, una nota, un recordatorio, una imagen o un video incrustado.</li>
                    <li>Guarda los cambios.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>19. ¬øC√≥mo usar el banco de preguntas?</summary>
            <div class="answer">
                <ul>
                    <li>Entender los niveles del banco de preguntas: Nivel del sistema, Nivel de categor√≠a, Nivel del curso.</li>
                    <li>Acceder al banco de preguntas: Ve a tu curso, en M√°s selecciona Banco de preguntas.</li>
                    <li>Crear una nueva pregunta: Selecciona tipo (opci√≥n m√∫ltiple, verdadero/falso, etc.), configura y guarda.</li>
                    <li>Exportar e importar preguntas: Usa pesta√±as Exportar/Importar con formato Moodle XML.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>20. ¬øC√≥mo crear una nueva pregunta en el banco de preguntas?</summary>
            <div class="answer">
                <ul>
                    <li>Dentro del banco de preguntas, haz clic en el bot√≥n Crear una nueva pregunta.</li>
                    <li>Moodle te presentar√° una variedad de tipos de preguntas para elegir: Opci√≥n m√∫ltiple, Verdadero/Falso, Emparejamiento, Respuesta corta, Ensayo.</li>
                    <li>Selecciona el tipo de pregunta que deseas y haz clic en A√±adir.</li>
                    <li>Configura la pregunta: nombre de la pregunta, enunciado de la pregunta, opciones de respuesta.</li>
                    <li>Haz clic en Guardar cambios. La nueva pregunta se guardar√° en tu banco.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>21. ¬øC√≥mo exportar e importar preguntas?</summary>
            <div class="answer">
                <ul>
                    <li>Exportar preguntas: En el banco de preguntas, haz clic en la pesta√±a Exportar. Selecciona el formato de archivo deseado (Moodle XML es el m√°s com√∫n). Elige la categor√≠a que deseas exportar y haz clic en Exportar preguntas a archivo.</li>
                    <li>Importar preguntas: En el banco de preguntas, haz clic en la pesta√±a Importar. Selecciona el formato de archivo (por ejemplo, Moodle XML). Arrastra y suelta el archivo o utiliza el selector de archivos para subirlo desde tu computadora. Haz clic en Importar para a√±adir las preguntas a tu banco.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>22. ¬øC√≥mo poner nombre a un curso (consejos)?</summary>
            <div class="answer">
                <ul>
                    <li>Al crear o editar un curso, ingresa a Configuraci√≥n del curso.</li>
                    <li>En el campo Nombre completo del curso, escribe el t√≠tulo que se mostrar√° a los estudiantes.</li>
                    <li>En Nombre corto del curso, coloca una versi√≥n abreviada (ejemplo: MAT101).</li>
                    <li>Guarda los cambios.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>23. ¬øC√≥mo crear r√∫bricas de evaluaci√≥n?</summary>
            <div class="answer">
                <ul>
                    <li>Entra al curso y ve a Calificaciones ‚Üí R√∫bricas.</li>
                    <li>Haz clic en A√±adir nueva r√∫brica y define un nombre descriptivo.</li>
                    <li>Configura los Criterios de evaluaci√≥n (ej: "Contenido", "Organizaci√≥n", "Originalidad").</li>
                    <li>Para cada criterio, define los Niveles de desempe√±o con sus puntajes y descripciones espec√≠ficas.</li>
                    <li>Activa Mostrar r√∫brica a los estudiantes si deseas transparencia.</li>
                    <li>Guarda la r√∫brica y as√≠gnala a una Tarea o Cuestionario en la configuraci√≥n de calificaci√≥n.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=rubricas_moodle5" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>24. ¬øC√≥mo configurar grupos de estudiantes?</summary>
            <div class="answer">
                <ul>
                    <li>En el curso, ve a Participantes ‚Üí Grupos.</li>
                    <li>Haz clic en Crear grupo y define nombre, descripci√≥n y modo de membres√≠a (manual o autom√°tica).</li>
                    <li>Para grupos autom√°ticos: selecciona Auto-asignar grupos y define el n√∫mero de grupos o estudiantes por grupo.</li>
                    <li>Para asignaci√≥n manual: haz clic en el grupo creado ‚Üí Agregar/eliminar usuarios y selecciona estudiantes.</li>
                    <li>Para crear Agrupamientos: ve a Agrupamientos ‚Üí Crear agrupamiento y a√±ade los grupos deseados.</li>
                    <li>Al crear actividades, en Configuraci√≥n com√∫n, selecciona Disponibilidad grupal y asigna al grupo o agrupamiento.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>25. ¬øC√≥mo configurar restricciones de acceso?</summary>
            <div class="answer">
                <ul>
                    <li>Al crear o editar cualquier actividad, ve a la secci√≥n Restricciones de acceso.</li>
                    <li>Haz clic en A√±adir restricci√≥n y selecciona el tipo de condici√≥n (fecha, calificaci√≥n previa, finalizaci√≥n de otra actividad).</li>
                    <li>Ejemplos: Por fecha ("visible solo entre el 15 y 30 de octubre"), Por calificaci√≥n ("disponible si obtuvieron m√°s de 70% en la Tarea 1"), Por finalizaci√≥n ("disponible despu√©s de completar la Lecci√≥n 3").</li>
                    <li>Puedes combinar m√∫ltiples restricciones usando Y/O para l√≥gica compleja.</li>
                    <li>Activa Mostrar actividad incluso si las restricciones no se cumplen para que los estudiantes vean lo que viene.</li>
                    <li>Guarda los cambios y prueba con una cuenta de estudiante.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>26. ¬øC√≥mo dar retroalimentaci√≥n masiva?</summary>
            <div class="answer">
                <ul>
                    <li>En cualquier Tarea, haz clic en Ve a la p√°gina de calificaciones o Ver todas las entregas.</li>
                    <li>Selecciona m√∫ltiples estudiantes usando las casillas de selecci√≥n o filtros por grupo.</li>
                    <li>Con estudiantes seleccionados, haz clic en Elegir acci√≥n ‚Üí Descargar entregas seleccionadas para calificar offline.</li>
                    <li>Para retroalimentaci√≥n en l√≠nea: selecciona Calificar varias entregas y usa la interfaz de hoja de c√°lculo.</li>
                    <li>Puedes usar Plantillas de comentarios guardadas previamente para ahorrar tiempo.</li>
                    <li>Para comentarios de audio/video: instala plugins Audio Feedback o Video Feedback.</li>
                    <li>Al finalizar, haz clic en Guardar cambios y los estudiantes recibir√°n notificaci√≥n.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=retroalimentacion_moodle5" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>27. ¬øC√≥mo generar reportes de participaci√≥n?</summary>
            <div class="answer">
                <ul>
                    <li>En el curso, ve a M√°s ‚Üí Reportes.</li>
                    <li>Tipos disponibles: Actividad de usuario, Completaci√≥n de actividades, Registros, Estad√≠sticas de participaci√≥n.</li>
                    <li>Selecciona el reporte deseado y aplica filtros espec√≠ficos (fecha, usuario, grupo).</li>
                    <li>Para exportar: haz clic en Descargar (formatos: CSV, Excel, PDF).</li>
                    <li>Configura Alertas autom√°ticas en Calificaciones ‚Üí Configuraci√≥n para notificaciones de entregas faltantes o bajas calificaciones.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=reportes_moodle5" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>28. ¬øC√≥mo integrar herramientas externas (Zoom, Teams, Google Drive)?</summary>
            <div class="answer">
                <ul>
                    <li>Para Zoom: Ve a Preferencias del sitio ‚Üí Plugins ‚Üí Zoom, configura credenciales, luego a√±ade actividad Zoom Meeting en tu curso.</li>
                    <li>Para Google Drive: En Configuraci√≥n del perfil ‚Üí Fuentes de archivos, activa Google Drive. Al adjuntar archivos, selecciona Google Drive como fuente.</li>
                    <li>Para Microsoft Teams: Configura en Administraci√≥n del sitio ‚Üí Plugins ‚Üí Teams, luego crea actividades Teams Meeting.</li>
                    <li>Importante: Consulta con el administrador antes de instalar plugins, ya que requiere permisos a nivel de sitio.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>29. ¬øC√≥mo configurar seguimiento de completaci√≥n de actividades?</summary>
            <div class="answer">
                <ul>
                    <li>Activa Edici√≥n en el curso y ve a Configuraci√≥n del curso.</li>
                    <li>En Completaci√≥n del curso, selecciona S√≠ para habilitar el seguimiento.</li>
                    <li>Para configurar por actividad: edita cualquier actividad y ve a Completaci√≥n de la actividad.</li>
                    <li>Selecciona Mostrar completaci√≥n de la actividad y define criterios (ver actividad, entregar tarea, publicar en foro, obtener calificaci√≥n m√≠nima).</li>
                    <li>Guarda los cambios. Los estudiantes ver√°n ‚úì al completar cada actividad.</li>
                    <li>Como docente, ve a Administraci√≥n del curso ‚Üí Informes ‚Üí Completaci√≥n del curso para monitorear el progreso.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>30. ¬øC√≥mo crear contenido accesible en Moodle?</summary>
            <div class="answer">
                <ul>
                    <li>Texto alternativo en im√°genes: Siempre agrega descripciones breves en "Texto alternativo" y usa "Descripci√≥n larga" para im√°genes complejas.</li>
                    <li>Estructura sem√°ntica: Usa encabezados (H1, H2, H3) en tus p√°ginas y actividades, no solo estilos visuales.</li>
                    <li>Contraste de colores: Verifica que el contraste entre texto y fondo cumpla con WCAG 2.1 (m√≠nimo 4.5:1 para texto normal).</li>
                    <li>Contenido multimedia: A√±ade subt√≠tulos a videos y transcripciones a audios.</li>
                    <li>Documentos accesibles: Al subir PDFs o Word, usa la herramienta "Comprobar accesibilidad" antes de publicar.</li>
                    <li>Prueba con lectores de pantalla: Usa NVDA (gratuito) o VoiceOver para probar c√≥mo navegan tus estudiantes con discapacidad visual.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>31. ¬øC√≥mo crear y gestionar badges (insignias)?</summary>
            <div class="answer">
                <ul>
                    <li>Habilitar badges: Ve a Administraci√≥n del sitio ‚Üí Caracter√≠sticas ‚Üí Badges y activa la funci√≥n (requiere permisos de administrador).</li>
                    <li>Crear un badge: En tu curso, ve a M√°s ‚Üí Badges y haz clic en A√±adir un nuevo badge.</li>
                    <li>Configurar criterios: Define c√≥mo se obtendr√° (Manual: t√∫ decides cu√°ndo entregarlo; Autom√°tico: se entrega al completar actividades).</li>
                    <li>Dise√±ar el badge: Sube una imagen PNG con fondo transparente (300x300 p√≠xeles) o usa un dise√±o simple con texto.</li>
                    <li>Visibilidad: Decide si los estudiantes pueden compartir sus badges en redes sociales o plataformas como Mozilla Backpack.</li>
                    <li>Notificaci√≥n: Los estudiantes recibir√°n un mensaje cuando obtengan un badge y podr√°n verlos en su perfil.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>

        <details>
            <summary>32. ¬øC√≥mo crear cuestionarios con preguntas aleatorias?</summary>
            <div class="answer">
                <ul>
                    <li>Preparar el banco de preguntas: Ve a Banco de preguntas ‚Üí Preguntas y aseg√∫rate de tener suficientes preguntas en tus categor√≠as.</li>
                    <li>Crear el cuestionario: Activa edici√≥n ‚Üí A√±adir actividad ‚Üí Cuestionario.</li>
                    <li>Agregar preguntas aleatorias: En Editar cuestionario, haz clic en A√±adir ‚Üí Desde el banco de preguntas.</li>
                    <li>Configurar selecci√≥n aleatoria: Selecciona la categor√≠a, marca "Incluir subcategor√≠as" si aplica, define n√∫mero de preguntas a seleccionar y activa "Barajar las preguntas".</li>
                    <li>Ventajas: Evita el fraude (cada estudiante recibe preguntas diferentes), cubre mejor el temario y ahorra tiempo.</li>
                    <li>Prueba primero: Siempre haz una Vista previa para verificar que la selecci√≥n aleatoria funciona correctamente.</li>
                </ul>
                <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow" class="video-link">Ver Video Tutorial</a>
            </div>
        </details>
  </div>
  </section>

</div>

<style>
  :root{
    --nc-primary:#1f57b6;  /* azul institucional */
    --nc-accent:#19b36b;   /* verde acento */
    --nc-danger:#d9534f;   /* rojo para botones de video */
    --nc-bg:#f6f9ff;
    --nc-text:#111;
  }

  .nc{color:var(--nc-text)}
  .nc-card{
    border:1px solid #e6e8f0; border-radius:16px; background:#fff;
    box-shadow:0 14px 38px rgba(0,0,0,.06); max-width:820px; margin:8px auto;
  }
  .nc-header{
    display:block; padding:14px 16px; border-radius:16px 16px 0 0; color:#fff;
    background:linear-gradient(90deg,var(--nc-primary), var(--nc-accent));
    font-weight:800; letter-spacing:.2px;
  }
  .nc-logo{
    border-radius:50%; background:#fff; padding:2px; object-fit:cover;
    box-shadow:0 2px 8px rgba(0,0,0,.15);
  }
  .nc-msgs{padding:16px; max-height:500px; overflow:auto; background:var(--nc-bg)}
  .nc-bubble{
    margin:10px 0; max-width:90%; padding:12px 14px; border-radius:14px; line-height:1.5;
    box-shadow:0 3px 10px rgba(0,0,0,.05); border:1px solid #e8ecf6; word-wrap:break-word;
    max-height:none; overflow:visible;
  }
  .nc-bubble.nc-bot{background:#fff; min-height:auto; white-space:normal;}
  .nc-bubble.nc-me {background:#e8f2ff; border-color:#cfe1ff; margin-left:auto}

  .nc-form{display:flex; gap:10px; padding:14px 16px; border-top:1px solid #eef2ff; background:#fff; border-radius:0 0 16px 16px}
  .nc-input{flex:1; padding:12px 14px; border:1px solid #d8dce8; border-radius:12px; background:#fbfbfe}
  .nc-send{padding:12px 16px; border-radius:12px; border:1px solid var(--nc-primary); background:var(--nc-primary); color:#fff; cursor:pointer; font-weight:700}
  .nc-send:hover{filter:brightness(.96)}

  /* Botones tipo enlace dentro de respuestas del bot */
  #nc-msgs a{
    display:inline-block; padding:8px 12px; border-radius:10px; text-decoration:none; font-weight:700;
    border:1px solid var(--nc-primary); background:#eef1ff; color:var(--nc-primary); margin-top:6px;
  }
  #nc-msgs a.primary{background:var(--nc-primary); color:#fff}
  #nc-msgs a.success{background:var(--nc-accent); color:#fff; border-color:var(--nc-accent)}
  #nc-msgs a.danger{background:var(--nc-danger); color:#fff; border-color:var(--nc-danger)}

  .nc-quick{display:flex;flex-wrap:wrap;gap:10px;padding:10px 16px;border-top:1px solid #eef2ff;background:#fbfdff}
  .nc-chip{
    background:#eef4ff;border:1px solid #dbe6ff;color:var(--nc-primary);
    border-radius:999px;padding:8px 12px;cursor:pointer;font-size:12px;font-weight:600
  }
  .nc-chip:hover{background:#e2ecff}

</style>

<style>
  /* FAQ styles replicated from index */
  .faq-header { border: 1px solid #e6e8f0; border-radius: 16px; background: linear-gradient(90deg, var(--nc-primary), var(--nc-accent)); color:#fff; box-shadow: 0 14px 38px rgba(0,0,0,.06); max-width: 820px; margin: 8px auto; }
  .faq-toolbar { display:flex; justify-content: space-between; align-items: center; gap: 30px; flex-wrap: wrap; padding: 20px 24px; }
  .faq-header-left { display:flex; align-items:center; gap:16px; }
  .faq-header-right { display:flex; align-items:center; gap:12px; margin-left:auto; }
  .faq-title { margin:0; font-size: 22px; font-weight: 800; }
  .back-btn { padding:8px 12px;border-radius:10px;border:1px solid #dbe6ff;background:#eef4ff;color:var(--nc-primary);font-weight:700;cursor:pointer }
  .back-btn:hover{ background:#e2ecff }

  .faq-search { display:block; max-width:820px; margin:-8px auto 14px; position:relative }
  .faq-search input { width:100%; padding:12px 16px; border-radius:999px; border:2px solid #e6e8f0; background:#fff; color:#111827; transition:all .2s }
  #questions-suggestions { position:absolute; top:100%; left:0; right:0; background:#fff; border:1px solid #dbe6ff; border-top:none; border-radius:0 0 12px 12px; max-height:250px; overflow-y:auto; z-index:1000; box-shadow: 0 8px 25px rgba(0,0,0,.15) }
  .suggestion-item { padding: 12px 16px; cursor: pointer; border-bottom: 1px solid #f0f2f5; transition: background-color 0.2s ease }
  .suggestion-item:hover { background: #eef4ff; }
  .suggestion-item:last-child { border-bottom: none }
  .highlight { background: #fff0b3; padding: 0 .2em; border-radius: 3px; font-weight: 600 }

  .faq-pills { display:flex; gap:10px; justify-content:center; max-width:820px; margin:0 auto 10px }
  .faq-actions { display:flex; gap:10px; justify-content:flex-end; max-width:820px; margin:0 auto 10px }
  .pill { padding:8px 12px; border-radius:10px; border:1px solid #dbe6ff; background:#eef4ff; color:var(--nc-primary); font-weight:700; cursor:pointer }
  .pill:hover{ background:#e2ecff }

  .section { display:none; max-width:820px; margin:0 auto; background:#fff; padding:20px; border-radius:16px; border:1px solid #e6e8f0 }
  .section.active { display:block }
  .section h2 { color: var(--nc-primary); text-align:center; margin:6px 0 16px }

  details { margin-bottom:12px; border:1px solid #dbe6ff; border-radius:10px; overflow:hidden; background:#eef4ff }
  summary { padding:14px 44px 14px 14px; background:#eef4ff; cursor:pointer; font-weight:600; position:relative; color:#111827 }
  summary::-webkit-details-marker { display:none }
  summary::after { content:'‚ñæ'; position:absolute; right:16px; top:50%; transform:translateY(-50%); font-size:1.2em; transition: transform .25s }
  details[open] > summary::after { transform: translateY(-50%) rotate(180deg) }
  .answer { padding:0 14px; line-height:1.65; background:#fff; overflow:hidden; max-height:0; transition:max-height .3s ease-out, padding .3s ease-out; color:#111827 }
  .answer ul { margin:8px 0 8px 20px }
  .answer li { margin:4px 0 }
  details[open] .answer { padding:14px; max-height:1200px; transition:max-height .45s ease-in, padding .45s ease-in }

  /* Dark mode mapped to .nc-dark */
  .nc.nc-dark .faq-header { background: linear-gradient(90deg, #1b3e8e, #146a43); color:#fff; border-color:#2a2e3f; box-shadow:none }
  .nc.nc-dark .faq-search input { background:#0f1220; color:#f5f7ff; border-color:#2a3353 }
  .nc.nc-dark #questions-suggestions { background:#1b2138; border-color:#2a3353; box-shadow: 0 8px 25px rgba(0,0,0,.3) }
  .nc.nc-dark .suggestion-item { border-bottom-color: #2a3353; color: #f5f7ff }
  .nc.nc-dark .suggestion-item:hover { background: #232b49 }
  .nc.nc-dark .highlight { background: #4a5568; color: #fff }
  .nc.nc-dark .pill, .nc.nc-dark .back-btn { background:#1b2138; border-color:#2a3353; color:#ffffff }
  .nc.nc-dark .pill:hover, .nc.nc-dark .back-btn:hover { background:#232b49 }
  .nc.nc-dark .section { background:#14182a; border-color:#2a2e3f; color:#f5f7ff }
  .nc.nc-dark details { border-color:#2a3353; background:#1b2138 }
  .nc.nc-dark summary { background:#1b2138; color:#f5f7ff }
  .nc.nc-dark .answer { background:#14182a; color:#f5f7ff }
</style>

<style>
  /* Modo oscuro independiente para FAQ */
  body.faq-dark-bg { background: #0f1220; }
  #view-faq.faq-dark .faq-header { background: linear-gradient(90deg, #1b3e8e, #146a43); color:#fff; border-color:#2a2e3f; box-shadow:none }
  #view-faq.faq-dark .faq-search input { background:#0f1220; color:#f5f7ff; border-color:#2a3353 }
  #view-faq.faq-dark #questions-suggestions { background:#1b2138; border-color:#2a3353; box-shadow: 0 8px 25px rgba(0,0,0,.3) }
  #view-faq.faq-dark .suggestion-item { border-bottom-color: #2a3353; color: #f5f7ff }
  #view-faq.faq-dark .suggestion-item:hover { background: #232b49 }
  #view-faq.faq-dark .highlight { background: #4a5568; color: #fff }
  #view-faq.faq-dark .pill, #view-faq.faq-dark .back-btn { background:#1b2138; border-color:#2a3353; color:#ffffff }
  #view-faq.faq-dark .pill:hover, #view-faq.faq-dark .back-btn:hover { background:#232b49 }
  #view-faq.faq-dark .section { background:#14182a; border-color:#2a2e3f; color:#f5f7ff }
  #view-faq.faq-dark details { border-color:#2a3353; background:#1b2138 }
  #view-faq.faq-dark summary { background:#1b2138; color:#f5f7ff }
  #view-faq.faq-dark .answer { background:#14182a; color:#f5f7ff }
</style>

<style>
  /* Lista de sugerencias del chat */
  .nc-suggest-list{
    position:absolute; left:16px; right:16px; bottom:100%; transform: translateY(-6px);
    background:#fff; border:1px solid #dbe6ff; border-radius:10px; box-shadow:0 14px 38px rgba(0,0,0,.06);
    max-height:260px; overflow:auto; z-index:20;
  }
  .nc-suggest-item{padding:10px 12px; cursor:pointer; transition:background .15s}
  .nc-suggest-item:hover, .nc-suggest-item.active{background:#eef4ff}
  .nc.nc-dark .nc-suggest-list{background:#1b2138; border-color:#2a3353}
  .nc.nc-dark .nc-suggest-item:hover, .nc.nc-dark .nc-suggest-item.active{background:#232b49}
  
  /* Estilos para sugerencias del FAQ */
  #questions-suggestions .nc-suggest-item{padding:10px 12px; cursor:pointer; transition:background .15s; color:#111827}
  #questions-suggestions .nc-suggest-item:hover, #questions-suggestions .nc-suggest-item.active{background:#eef4ff}
  #view-faq.faq-dark #questions-suggestions{background:#1b2138!important; border-color:#2a3353!important}
  #view-faq.faq-dark #questions-suggestions .nc-suggest-item{color:#f5f7ff}
  #view-faq.faq-dark #questions-suggestions .nc-suggest-item:hover, 
  #view-faq.faq-dark #questions-suggestions .nc-suggest-item.active{background:#232b49}
</style>

<style>
  .nc-typing{display:inline-flex;gap:4px;align-items:center}
  .nc-dot-typing{
    width:6px;height:6px;border-radius:50%;background:#9aa7c7;
    opacity:.6;animation:nc-bounce 1s infinite ease-in-out;
  }
  .nc-dot-typing:nth-child(2){animation-delay:.15s}
  .nc-dot-typing:nth-child(3){animation-delay:.3s}

  @keyframes nc-bounce{
    0%,80%,100%{transform:translateY(0);opacity:.6}
    40%{transform:translateY(-4px);opacity:1}
  }
</style>

<style>
  .nc-suggest{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .nc-suggest .nc-chip{
    background:#eef4ff;border:1px solid #dbe6ff;color:var(--nc-primary);
    border-radius:999px;padding:6px 10px;cursor:pointer;font-size:12px;font-weight:600
  }
  .nc-suggest .nc-chip:hover{background:#e2ecff}
</style>

<style>
  .nc-media{margin-top:10px}
  .nc-media img{
    max-width:100%;
    height:auto;
    display:block;
    border-radius:12px;
    border:1px solid #e6e8f0;
    box-shadow:0 6px 16px rgba(0,0,0,.06);
  }
</style>

<style>
  /* Barra superior con bot√≥n de tema */
  .nc-toolbar{display:flex;justify-content:flex-end;gap:8px;padding:8px 12px;background:#fff;border-bottom:1px solid #eef2ff}
  .nc-theme-btn{
    padding:8px 12px;border-radius:10px;border:1px solid var(--nc-primary);
    background:var(--nc-primary);color:#fff;font-weight:700;cursor:pointer
  }
  .nc-theme-btn:hover{filter:brightness(.96)}

  /* ---- Tema oscuro mejor contraste ---- */
.nc.nc-dark {
  color: #e8ecf7; /* Texto general claro */
}

.nc.nc-dark .nc-card {
  background: #14182a;
  border-color: #2a2e3f;
  box-shadow: none;
}

.nc.nc-dark .nc-header {
  background: linear-gradient(90deg, #1b3e8e, #146a43);
  color: #ffffff;
}

.nc.nc-dark .nc-toolbar {
  background: #14182a;
  border-bottom-color: #2a2e3f;
}

.nc.nc-dark .nc-msgs {
  background: #0f1220;
}

.nc.nc-dark .nc-bubble.nc-bot {
  background: #1b2138;
  border-color: #2a3353;
  color: #f5f7ff; /* texto claro */
}

.nc.nc-dark .nc-bubble.nc-me {
  background: #21407a;
  border-color: #21407a;
  color: #ffffff;
}

.nc.nc-dark .nc-input {
  background: #0f1220;
  color: #f5f7ff;
  border-color: #2a3353;
}

.nc.nc-dark .nc-send {
  background: #4f8bff;
  border-color: #4f8bff;
  color: #ffffff;
}

.nc.nc-dark #nc-msgs a {
  background: #3b4770;
  border-color: #3b4770;
  color: #ffffff;
}

.nc.nc-dark #nc-msgs a.success {
  background: #58d39a;
  border-color: #58d39a;
  color: #0b0e1a;
}

.nc.nc-dark #nc-msgs a.danger {
  background: #ff6b6b;
  border-color: #ff6b6b;
  color: #0b0e1a;
}

.nc.nc-dark .nc-quick {
  background: #13182a;
  border-top-color: #2a2e3f;
}

.nc.nc-dark .nc-chip {
  background: #1b2138;
  border-color: #2a3353;
  color: #ffffff;
}

.nc.nc-dark .nc-chip:hover {
  background: #232b49;
}

.nc.nc-dark .nc-suggest .nc-chip {
  background: #1b2138;
  border-color: #2a3353;
  color: #ffffff;
}

/* Dots ‚Äúescribiendo‚Ä¶‚Äù visibles */
.nc.nc-dark .nc-dot-typing {
  background: #cfe0ff;
  opacity: 0.9;
}


  /* Dots de ‚Äúescribiendo‚Ä¶‚Äù m√°s visibles en oscuro */
  .nc.nc-dark .nc-dot-typing{background:#cfe0ff;opacity:.8}
</style>

<style>
.respuesta-bloque {
  background: var(--bg-bloque);
  color: var(--texto-bloque);
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid var(--borde-bloque);
}

.boton-video a {
  display: inline-block;
  padding: 8px 12px;
  border-radius: 8px;
  background: #d9534f;
  color: #fff;
  text-decoration: none;
  font-weight: 600;
}

/* Variables para modo claro */
body.light-mode {
  --bg-input-area: #ffffff;
  --bg-input: #f9f9f9;
  --border-input: #ccc;
  --text-input: #000;
  --bg-button: #4a90e2;
  --text-button: #fff;
}

/* Variables para modo oscuro */
body.dark-mode {
  --bg-input-area: #121212;
  --bg-input: #1e1e1e;
  --border-input: #444;
  --text-input: #fff;
  --bg-button: #2979ff;
  --text-button: #fff;
}

/* Contenedor del input y bot√≥n */
#nc-form {
  background: var(--bg-input-area);
  padding: 10px;
  display: flex;
  gap: 5px;
}

/* Input */
#nc-input {
  background: var(--bg-input);
  border: 1px solid var(--border-input);
  color: var(--text-input);
  flex: 1;
  padding: 6px;
  border-radius: 6px;
}

/* Bot√≥n de enviar */
#nc-send {
  background: var(--bg-button);
  color: var(--text-button);
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
}

</style>

<style >
.mensaje-inicial {
  background: var(--bg-msg);
  padding: 6px;
  border-radius: 6px;
  margin: 4px 0;
  border: 1px solid var(--border-msg);
}

.cursor-escribiendo {
  border-right: 1px solid var(--cursor-color);
}

body.light-mode {
  --bg-msg: #f1f1f1;
  --border-msg: #ccc;
  --cursor-color: #333;
}

body.dark-mode {
  --bg-msg: #1f1f1f;
  --border-msg: #444;
  --cursor-color: #fff;
}
</style>
<style>
  /* Vistas exclusivas (pantallas) */
  .view { display: none; }
  .view.active { display: block; }
  /* Animaciones b√°sicas */
  .fade-enter { opacity: 0; transform: translateY(10px); }
  .fade-enter-active { opacity: 1; transform: translateY(0); transition: opacity .25s ease, transform .25s ease; }
  .fade-exit { opacity: 1; transform: translateY(0); }
  .fade-exit-active { opacity: 0; transform: translateY(-6px); transition: opacity .18s ease, transform .18s ease; }
  /* Sugerencias buscador */
  .suggestion-item { padding: 10px 14px; cursor: pointer; }
  .suggestion-item:hover { background: #eef4ff; }
  .highlight { background: #fff0b3; padding: 0 .1em; border-radius: 3px; }
</style>
<p>
  <script>
    (function() {
      // --- util ---
      const norm = s => (s || "")
        .toLowerCase()
        .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
        .replace(/[¬ø?¬°!.,:;()"]/g, " ")
        .replace(/\s+/g, " ")
        .trim();

      // Tema oscuro independiente del FAQ (no afecta al chat)
      (function(){
        const viewFaq = document.getElementById('view-faq');
        const toFaqBtn = document.getElementById('toFaq');
        const backBtn = document.getElementById('backToBot');
        const themeBtnFaq = document.getElementById('themeToggleFaq');
        const FAQ_THEME_KEY = 'faqTheme';

        function setFaqBackground(active){
          if(active) document.body.classList.add('faq-dark-bg'); else document.body.classList.remove('faq-dark-bg');
        }
        function updateFaqThemeButton(isDark){ if(themeBtnFaq) themeBtnFaq.textContent = isDark ? '‚òÄÔ∏è' : 'üåô'; }
        function applyFaqTheme(theme){
          if(!viewFaq) return;
          if(theme==='dark'){
            viewFaq.classList.add('faq-dark');
            updateFaqThemeButton(true);
            localStorage.setItem(FAQ_THEME_KEY,'dark');
            const isActive = viewFaq.classList.contains('active') && viewFaq.getAttribute('aria-hidden') !== 'true';
            setFaqBackground(isActive);
          } else {
            viewFaq.classList.remove('faq-dark');
            updateFaqThemeButton(false);
            localStorage.setItem(FAQ_THEME_KEY,'light');
            setFaqBackground(false);
          }
        }
        // Inicializa seg√∫n preferencia guardada o sistema
        const savedFaqTheme = localStorage.getItem(FAQ_THEME_KEY) || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        applyFaqTheme(savedFaqTheme);

        if(themeBtnFaq){
          themeBtnFaq.addEventListener('click', ()=>{
            const isDark = viewFaq.classList.contains('faq-dark');
            applyFaqTheme(isDark ? 'light' : 'dark');
          });
        }
        if(toFaqBtn){
          toFaqBtn.addEventListener('click', ()=>{
            const saved = localStorage.getItem(FAQ_THEME_KEY) || 'light';
            if(saved === 'dark') setFaqBackground(true);
          });
        }
        if(backBtn){
          backBtn.addEventListener('click', ()=>{ setFaqBackground(false); });
        }
      })();

      // Autocompletado del FAQ mejorado (igual que el chat)
      (function(){
        const input = document.getElementById('searchInput');
        const list = document.getElementById('questions-suggestions');
        const root = document.getElementById('view-faq');
        let activeIndex = -1;
        let catalog = [];

        function normalize(s){ return (s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').trim(); }

        function buildCatalog(){
          const items = [];
          if(root){
            root.querySelectorAll('details > summary').forEach(sum=>{
              const text = sum.textContent.trim();
              const sec = sum.closest('.section');
              const sectionId = sec ? sec.id : null;
              items.push({label:text, q:text, target: sum, sectionId: sectionId});
            });
          }
          catalog = items;
        }
        buildCatalog();

        function getActiveSection(){
          const active = root?.querySelector('.section.active');
          return active ? active.id : null;
        }

        function ensureVisible(el){
          const sec = el.closest('.section');
          if(sec && !sec.classList.contains('active')){
            document.getElementById('estudiante')?.classList.remove('active');
            document.getElementById('docente')?.classList.remove('active');
            sec.classList.add('active');
          }
          const det = el.closest('details');
          if(det) det.open = true;
          el.scrollIntoView({behavior:'smooth', block:'center'});
          el.focus({preventScroll:true});
        }

        function render(items){
          if(!items.length){ list.style.display='none'; list.innerHTML=''; activeIndex=-1; return; }
          list.innerHTML = items.map((it,i)=>`<div class="nc-suggest-item${i===0?' active':''}" data-q="${it.q.replace(/"/g,'&quot;')}">${it.label}</div>`).join('');
          list.style.display='block';
          activeIndex = 0;
          Array.from(list.children).forEach((node, idx)=>{
            node.addEventListener('mouseenter', ()=> setActive(idx));
            node.addEventListener('mousedown', (ev)=>{ ev.preventDefault(); completeAndGo(idx); });
          });
        }
        function setActive(idx){
          const nodes = Array.from(list.children);
          nodes.forEach(n=> n.classList.remove('active'));
          if(idx>=0 && idx<nodes.length){ 
            nodes[idx].classList.add('active'); 
            activeIndex=idx;
            nodes[idx].scrollIntoView({block:'nearest'});
          }
        }
        function completeAndGo(idx){
          const nodes = Array.from(list.children);
          if(!nodes.length) return;
          const node = nodes[idx>=0?idx:0];
          const q = node.getAttribute('data-q') || node.textContent.trim();
          input.value = '';
          list.style.display='none'; list.innerHTML=''; activeIndex=-1;
          const hit = catalog.find(it => it.q === q);
          if(hit && hit.target){ ensureVisible(hit.target); }
        }

        input.addEventListener('input', ()=>{
          const q = normalize(input.value);
          if(!q){ list.style.display='none'; list.innerHTML=''; return; }
          const matches = catalog.filter(it=> normalize(it.label).includes(q));
          render(matches.slice(0,8));
        });
        
        input.addEventListener('keydown', (e)=>{
          const visible = list.style.display==='block';
          if(!visible){
            if(e.key==='Enter'){
              e.preventDefault();
              const q = normalize(input.value);
              if (!q) return;
              const activeSec = getActiveSection();
              let hit = catalog.find(it => it.sectionId === activeSec && normalize(it.label).includes(q));
              if (!hit) hit = catalog.find(it => normalize(it.label).includes(q));
              if(hit){ ensureVisible(hit.target); input.value = ''; }
            }
            return;
          }
          const nodes = Array.from(list.children);
          if(e.key==='ArrowDown'){ e.preventDefault(); setActive(Math.min(nodes.length-1, activeIndex+1)); }
          else if(e.key==='ArrowUp'){ e.preventDefault(); setActive(Math.max(0, activeIndex-1)); }
          else if(e.key==='Enter'){ e.preventDefault(); completeAndGo(activeIndex); }
          else if(e.key==='Escape'){ list.style.display='none'; list.innerHTML=''; activeIndex=-1; input.blur(); }
        });
        
        document.addEventListener('click', (e)=>{ 
          if(!list.contains(e.target) && e.target!==input){ 
            list.style.display='none'; 
          }
        });

        root?.addEventListener('toggle', (e)=>{ 
          if(e.target && e.target.tagName==='DETAILS'){ buildCatalog(); }
        });
      })();

      // URL de los videos
      const VIDEO_MATRICULACION = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
      const VIDEO_PAGINA = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
      const VIDEO_TAREA = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
      const VIDEO_FORO = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
      const VIDEO_PERFIL = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";

      // Imagen opcional para respuestas (s√∫bela a Moodle y pega el URL p√∫blico)
      const IMG_CALENDARIO = "https://scontent.fsal2-2.fna.fbcdn.net/v/t39.30808-6/484553841_9387352094687408_6800608587075683597_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=833d8c&_nc_ohc=w4laWYBlHcEQ7kNvwF4HyrB&_nc_oc=Adm2MqO6s8jhnkX06a8gDTY_cvQaumGmd7jfEFY3ZtMydrcFUj-cOQ2X9hq_RJo55vs0pGzwhAI3QBgueSTS-Yss&_nc_zt=23&_nc_ht=scontent.fsal2-2.fna&_nc_gid=MsiTGgaZaTuUwqOpHQIdAA&oh=00_AfUBHRD8F1QfV2Cpd-3IdwY0RNoGb-aL9S5BknwstCpbdg&oe=68A0B739 "; // deja "" si no quieres imagen



      // Sugerencias contextuales seg√∫n el intent respondido
      const SUGGESTIONS = {
        video_matriculacion: [
          { label: "Ver calendario", q: "¬øCu√°ndo inicia y cu√°ndo termina el ciclo 02-2025?" },
          { label: "Crear P√°gina",   q: "¬øC√≥mo crear una P√°gina en Moodle 5?" },
          { label: "Contacto TAC",   q: "¬øC√≥mo puedo contactar a la Unidad?" }
        ],
        proyecto: [
          { label: "Beneficios", q: "¬øCu√°les son los beneficios para estudiantes y docentes?" },
          { label: "Objetivo",   q: "¬øCu√°l es el objetivo principal?" },
          { label: "Documentos", q: "¬øPuedes mostrarme los documentos que tienes a disposici√≥n?" }
        ],
        calendario_academico: [
          { label: "1ros parciales", q: "¬øCu√°ndo son los primeros parciales?" },
          { label: "2dos parciales", q: "¬øCu√°ndo son los segundos parciales?" },
          { label: "Finales",        q: "¬øCu√°ndo son los ex√°menes finales?" }
        ],
        crear_pagina: [
          { label: "Crear Tarea", q: "¬øC√≥mo crear una Tarea en Moodle 5?" },
          { label: "Crear Foro",  q: "¬øC√≥mo crear un Foro en Moodle 5?" },
          { label: "Perfil Docente", q: "¬øC√≥mo configurar mi perfil como docente?" }
        ],
        crear_tarea: [
          { label: "Crear Foro",  q: "¬øC√≥mo crear un Foro en Moodle 5?" },
          { label: "Crear P√°gina",q: "¬øC√≥mo crear una P√°gina en Moodle 5?" }
        ],
        crear_foro: [
          { label: "Crear Tarea", q: "¬øC√≥mo crear una Tarea en Moodle 5?" },
          { label: "Crear P√°gina",q: "¬øC√≥mo crear una P√°gina en Moodle 5?" }
        ],
        configurar_perfil_docente: [
          { label: "Crear P√°gina", q: "¬øC√≥mo crear una P√°gina en Moodle 5?" },
          { label: "Contacto TAC", q: "¬øC√≥mo puedo contactar a la Unidad?" }
        ],
        presentacion: [
          { label: "Proyecto TAC", q: "¬øPuedes comentarme en qu√© consiste el nuevo proyecto de la Unidad TAC?" },
          { label: "Beneficios", q: "¬øCu√°les son los beneficios para estudiantes y docentes?" }
        ],
        bienvenida: [
          { label: "Unidad TAC", q: "¬øQu√© es la Unidad TAC?" },
          { label: "Servicios", q: "¬øQu√© servicios ofrece la Unidad TAC?" }
        ],
        gracias: [
          { label: "Contacto", q: "¬øC√≥mo puedo contactar a la Unidad?" },
          { label: "M√°s ayuda", q: "¬øQu√© otros servicios tienen?" }
        ],
        despedida: [
          { label: "Proyecto", q: "¬øEn qu√© consiste el proyecto?" },
          { label: "Futuro", q: "¬øCu√°l es la visi√≥n a futuro?" }
        ]
      };


      // Im√°genes por intenci√≥n (solo se inyectan si hay URL)
      const MEDIA = {
        calendario_academico: { img: IMG_CALENDARIO, alt: "Calendario acad√©mico 02-2025" }
        // Ejemplos futuros:
        // crear_tarea: { img: IMG_TAREA, alt: "Flujo para crear Tarea" },
        // crear_foro:  { img: IMG_FORO,  alt: "Tipos de foro en Moodle" }
      };


      // --- intenciones ---
      const INTENTS = [{
        // --- PARA CLAVE DE MATRICULACION ---
        id: "video_matriculacion",
        patterns: [
          /matriculaci(o|on|√≥n)/,
          /(clave|contrasena|contrase√±a).*(matricul)/,
          /ayuda.*(matricul|clave)/,
          /video.*matricul/,
          /tutorial.*matricul/
        ],
       answer: `
          <div class="respuesta-bloque">
            <b>Configurar clave de matriculaci√≥n en Moodle 5:</b>
            <ol>
              <li>Entra al curso y abre <b>Ajustes del curso</b> (engrane superior).</li>
              <li>Ve a <b>Usuarios ‚Üí M√©todos de matriculaci√≥n</b>.</li>
              <li>Activa <b>Auto-matriculaci√≥n (Estudiante)</b>.</li>
              <li>Haz clic en el engrane, escribe la clave y guarda.</li>
            </ol>
            <div class="boton-video">
              <a href="${VIDEO_MATRICULACION}" target="_blank" rel="noopener nofollow">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
`
    },
          // --- PARA CREAR UNA PAGINA ---
          {
            id: "crear_pagina",
            patterns: [
              /crear.*pagina/,
              /configurar.*pagina/,
              /recurso.*pagina/,
              /como.*(crear|configurar).*pagina/,
              /pagina.*moodle/,
              /\bpage\b/
            ],
            answer: `
              <div class="respuesta-bloque">
                <b>Crear una P√°gina en Moodle 5:</b>
                <ol style="margin:6px 0 0 18px;">
                  <li>Activa <b>Edici√≥n</b> en el curso.</li>
                  <li>Haz clic en <b>A√±adir una actividad o un recurso</b> ‚Üí <b>P√°gina</b>.</li>
                  <li>Completa <b>Nombre</b> y el <b>Contenido</b> (puedes usar <i>C√≥digo fuente</i> para HTML).</li>
                  <li>(Opcional) Ajusta <b>Restricciones</b> y <b>Finalizaci√≥n</b>.</li>
                  <li>Pulsa <b>Guardar y mostrar</b>.</li>
                </ol>
                 <div class="boton-video">
                  <a href="${VIDEO_PAGINA}" target="_blank" rel="noopener nofollow"
                    style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                    üé• Ver video: crear P√°gina
                  </a>
                </div>
              </div>
            `
          },
          // --- PARA CREAR UNA TAREA---
          {
            id: "crear_tarea",
            patterns: [
              /crear.*tarea/,
              /configurar.*tarea/,
              /actividad.*tarea/,
              /como.*(crear|configurar).*tarea/,
              /tarea.*moodle/,
              /assignment/
            ],
            answer: `
              <div class="respuesta-bloque">
                <b>Crear una Tarea en Moodle 5:</b>
                <ol style="margin:6px 0 0 18px;">
                  <li>Activa <b>Edici√≥n</b> en el curso.</li>
                  <li>Ve a <b>A√±adir una actividad o un recurso</b> ‚Üí <b>Tarea</b>.</li>
                  <li>Completa <b>Nombre</b> y <b>Descripci√≥n</b>.</li>
                  <li>En <b>Disponibilidad</b>: define apertura, entrega y fecha l√≠mite.</li>
                  <li>En <b>Tipos de entrega</b>: archivos, texto en l√≠nea o ambos.</li>
                  <li>Ajusta <b>Calificaci√≥n</b> y dem√°s opciones si hace falta.</li>
                  <li>Pulsa <b>Guardar y mostrar</b>.</li>
                </ol>
                <div class="boton-video">
                  <a href="${VIDEO_TAREA}" target="_blank" rel="noopener nofollow"
                    style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                    üé• Ver video: crear Tarea
                  </a>
                </div>
              </div>
            `
          },
          // --- PARA CREAR UN FORO---
          {
            id: "crear_foro",
            patterns: [
              /crear.*foro/,
              /configurar.*foro/,
              /foro.*moodle/,
              /como.*(crear|configurar).*foro/,
              /forum/
            ],
            answer: `
              <div class="respuesta-bloque">
                <b>Crear un Foro en Moodle 5:</b>
                <ol style="margin:6px 0 0 18px;">
                  <li>Activa <b>Edici√≥n</b> en el curso.</li>
                  <li>Ve a <b>A√±adir una actividad o un recurso</b> ‚Üí <b>Foro</b>.</li>
                  <li>Completa <b>Nombre</b> y <b>Descripci√≥n</b>.</li>
                  <li>Elige <b>Tipo de foro</b> (est√°ndar, P&amp;R, etc.).</li>
                  <li>(Opcional) Ajusta <b>Suscripci√≥n</b> y <b>Calificaci√≥n</b>.</li>
                  <li>Pulsa <b>Guardar y mostrar</b>.</li>
                </ol>
               <div class="boton-video">
                  <a href="${VIDEO_FORO}" target="_blank" rel="noopener nofollow"
                    style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                    üé• Ver video: crear Foro
                  </a>
                </div>
              </div>
            `
          },
          // --- PARA Configurar el perfil---
          {
            id: "configurar_perfil_docente",
            patterns: [
              /configurar mi perfil/,
              /editar perfil profesor/,
              /actualizar perfil/,
              /cambiar foto perfil/,
              /perfil catedratico/,
              /perfil docente/
            ],
            answer: `
              <div class="respuesta-bloque">
                <b>Configurar tu perfil como docente en Moodle 5:</b>
                <ol style="margin:6px 0 0 18px;">
                  <li>Inicia sesi√≥n en Moodle.</li>
                  <li>Haz clic en tu nombre o foto (arriba a la derecha).</li>
                  <li>Selecciona <b>Perfil</b> y luego <b>Editar perfil</b>.</li>
                  <li>Actualiza tu informaci√≥n y sube una foto si deseas.</li>
                  <li>Haz clic en <b>Actualizar informaci√≥n personal</b> para guardar.</li>
                </ol>
                <div class="boton-video">
                  <a href="${VIDEO_PERFIL}" target="_blank" rel="noopener nofollow"
                    style="display:inline-block;padding:8px 12px;border-radius:8px;background:#007bff;color:#fff;text-decoration:none;font-weight:600;">
                    Ver video tutorial
                  </a>
                </div>
              </div>
            `
          },

          {
          id: "presentacion",
          patterns: [/presentar(te)?/, /presentacion/, /hola/],
          answer: `
            <div class="respuesta-bloque">
              <b>¬°Hola!</b> Soy el <b>Chatbot TAC</b>, un prototipo desarrollado por la Unidad TAC
              para mostrar c√≥mo la <b>inteligencia artificial</b> puede apoyar a docentes y estudiantes.
              Estoy aqu√≠ para responder preguntas sobre el proyecto, la Unidad TAC y darte una idea
              de c√≥mo funcionar√≠a un asistente virtual integrado en todos los cursos.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=presentacion_tac" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        // App m√≥vil de Moodle
        {
          id: "alumno_app_movil",
          patterns: [/movil/, /app/, /telefono/, /celular/, /dispositivo/, /como usar moodle en mi dispositivo movil/, /usar moodle dispositivo movil/],
          answer: `
            <div class="respuesta-bloque">
              <b>Usar Moodle 5.0 en tu dispositivo m√≥vil:</b>
              <ol>
                <li><strong>Descargar la app:</strong> Busca "Moodle" en Google Play Store (Android) o App Store (iOS).</li>
                <li><strong>Iniciar sesi√≥n:</strong> 
                  <ul>
                    <li>Ingresa la URL de tu universidad: <b>https://tu-universidad.moodle.edu</b></li>
                    <li>Usa tus mismas credenciales de NetCampus.</li>
                  </ul>
                </li>
                <li><strong>Funcionalidades principales:</strong>
                  <ul>
                    <li>Ver tus cursos y actividades pendientes.</li>
                    <li>Descargar materiales para ver sin conexi√≥n.</li>
                    <li>Recibir notificaciones push.</li>
                    <li>Participar en foros y chats.</li>
                    <li>Entregar tareas (si son archivos peque√±os).</li>
                  </ul>
                </li>
                <li><strong>L√≠mites importantes:</strong>
                  <ul>
                    <li>No puedes crear actividades o cursos desde la app (solo visualizar).</li>
                    <li>Algunos contenidos H5P pueden no funcionar correctamente en m√≥vil.</li>
                    <li>Para ex√°menes largos, se recomienda usar computadora.</li>
                  </ul>
                </li>
                <li><strong>Consejo:</strong> Activa <b>Ver sin conexi√≥n</b> en los cursos que quieras acceder sin internet.</li>
              </ol>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=moodle_movil" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üì± Ver tutorial app m√≥vil
                </a>
              </div>
            </div>
          `
        },
        {
          id: "bienvenida",
          patterns: [/bienvenid(a|o)?/, /dar la bienvenida/],
          answer: `
            <div class="respuesta-bloque">
              <b>¬°Bienvenido/a al entorno de prueba del Chatbot TAC!</b><br>
              Aqu√≠ puedes interactuar conmigo para conocer m√°s sobre:
              <ul>
                <li>El <b>proyecto de chatbots</b> en la universidad.</li>
                <li>La <b>Unidad TAC</b> y sus funciones.</li>
                <li>Informaci√≥n acad√©mica y de soporte.</li>
              </ul>
              Esta es una demostraci√≥n; en la versi√≥n final estar√© integrado al curso
              con acceso a tus recursos y actividades.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "proyecto",
          patterns: [/proyecto/, /en que consiste/,
            /consiste el nuevo proyecto/
          ],
          answer: `
            <div class="respuesta-bloque">
              El <b>proyecto de chatbots educativos</b> de la Unidad TAC busca incorporar asistentes virtuales en los cursos para:
              <ul>
                <li>Brindar <b>respuestas inmediatas</b> a dudas frecuentes.</li>
                <li>Apoyar a los docentes en <b>gesti√≥n y comunicaci√≥n</b>.</li>
                <li>Mejorar la <b>experiencia de aprendizaje</b> de los estudiantes.</li>
              </ul>
              Esta prueba es solo una muestra de lo que se puede lograr.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=proyecto_tac" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "objetivo",
          patterns: [/objetivo(s)?/, /meta principal/],
          answer: `
            <div class="respuesta-bloque">
              El objetivo principal es que <b>cada curso</b> cuente con un asistente virtual
              disponible <b>24/7</b> que pueda responder preguntas, dar recordatorios
              y facilitar la navegaci√≥n por la plataforma.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "beneficios",
          patterns: [/beneficio(s)?/, /ventaja(s)?/],
          answer: `
            <div class="respuesta-bloque">
              <b>Beneficios esperados:</b>
              <ul>
                <li>Ahorro de tiempo para docentes y estudiantes.</li>
                <li>Atenci√≥n inmediata en cualquier momento.</li>
                <li>Informaci√≥n consistente y actualizada.</li>
              </ul>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "unidad_tac",
          patterns: [/unidad tac/, /que es la unidad tac/,
            /tecnologias del aprendizaje/
          ],
          answer: `
            <div class="respuesta-bloque">
              La <b>Unidad de Tecnolog√≠as del Aprendizaje y el Conocimiento (TAC)</b> impulsa la
              integraci√≥n de herramientas digitales en la docencia, brindando soporte, capacitaci√≥n
              y asesor√≠a en innovaci√≥n educativa.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "funcion_tac",
          patterns: [/funcion de la unidad/, /rol(es)? tac/,
            /que hace la unidad tac/
          ],
          answer: `
            <div class="respuesta-bloque">
              <b>Funciones principales de la Unidad TAC:</b>
              <ul>
                <li>Capacitaci√≥n docente en uso de tecnolog√≠a educativa.</li>
                <li>Soporte t√©cnico sobre plataformas.</li>
                <li>Asesor√≠a en dise√±o de cursos virtuales.</li>
              </ul>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "historia_tac",
          patterns: [/historia tac/, /cuando se creo/,
            /desde cuando existe/
          ],
          answer: `
            <div class="respuesta-bloque">
              La Unidad TAC fue creada para modernizar la ense√±anza universitaria mediante
              la adopci√≥n de tecnolog√≠as. Desde su fundaci√≥n ha liderado iniciativas de
              innovaci√≥n y formaci√≥n digital.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "ubicacion_tac",
          patterns: [/como puedo llegar/, /donde (estan|se encuentra)/],
          answer: `
            <div class="respuesta-bloque">
              <b>Ubicaci√≥n:</b> Edificio Central, piso 3, oficina 305.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "contacto_tac",
          patterns: [/contacto/,/contactar/, /contactar a la unidad/,/correo/, /telefono/, /comunicarme/],
          answer: `
            <div class="respuesta-bloque">
              <b>Contacto Unidad TAC:</b><br>
              üìß tac@universidad.edu<br>
              üìû (+504) 1234-5678<br>
              Horario: lunes a viernes, 8:00‚Äì17:00.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "servicios_tac",
          patterns: [/servicio(s)?/, /ofrece la unidad tac/, /que brindan/],
          answer: `
            <div class="respuesta-bloque">
              <b>Servicios de la Unidad TAC:</b>
              <ul>
                <li>Capacitaci√≥n en plataformas virtuales.</li>
                <li>Soporte t√©cnico y resoluci√≥n de problemas.</li>
                <li>Asesor√≠a en dise√±o instruccional y multimedia.</li>
              </ul>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=servicios_tac" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "futuro",
          patterns: [/futuro/, /vision/],
          answer: `
            <div class="respuesta-bloque">
              En el futuro se busca integrar chatbots en todos los cursos,
              conectados a datos reales y con capacidad de dar asistencia
              personalizada a cada estudiante y docente.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=futuro_tac" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "documentos",
          patterns: [/documento(s)?/, /manual/, /guia/],
          answer: `
            <div class="respuesta-bloque">
              üìÑ <a href="#" target="_blank" rel="noopener nofollow">Documento del Proyecto</a><br>
              üìÑ <a href="#" target="_blank" rel="noopener nofollow">Manual de Uso del Chatbot</a>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=documentos_tac" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "calendario_academico",
          patterns: [/calendario/, /fechas importantes/, /cuando inicia/,
            /cuando termina/
          ],
          answer: `
            <div class="respuesta-bloque">
              <b>Calendario acad√©mico ciclo 02-2025:</b>
              <ul>
                <li>üìÖ Inicio de clases: <b>14 de julio</b></li>
                <li>üìÖ Finalizaci√≥n: <b>29 de noviembre</b></li>
                <li>üìù Primeros parciales: <b>1 al 6 de septiembre</b></li>
                <li>üìù Segundos parciales: <b>20 al 25 de octubre</b></li>
                <li>üìö Ex√°menes finales: <b>2 al 8 de diciembre</b></li>
              </ul>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=calendario_academico" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "calendario_academico2",
          patterns: [/primeros parciales/],
          answer: `
            <div class="respuesta-bloque">
              <b>Calendario acad√©mico ciclo 02-2025:</b>
              <ul>
                <li>üìù Primeros parciales: <b>1 al 6 de septiembre</b></li>
              </ul>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=primeros_parciales" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },

        {
          id: "calendario_academico3",
          patterns: [/segundos parciales/],
          answer: `
            <div class="respuesta-bloque">
              <b>Calendario acad√©mico ciclo 02-2025:</b>
              <ul>
                <li>üìù Segundos parciales: <b>20 al 25 de octubre</b></li>
              </ul>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=segundos_parciales" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "calendario_academico4",
          patterns: [/examenes finales/],
          answer: `
            <div class="respuesta-bloque">
              <b>Calendario acad√©mico ciclo 02-2025:</b>
              <ul>
                <li>üìö Ex√°menes finales: <b>2 al 8 de diciembre</b></li>
              </ul>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=examenes_finales" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "politicas_evaluacion",
          patterns: [/politica(s)?/, /evaluacion/, /reglas/],
          answer: `
            <div class="respuesta-bloque">
              <b>Pol√≠ticas de evaluaci√≥n:</b>
              <ol>
                <li>Solo los alumnos matriculados correctamente en NetCampus podr√°n evaluarse.</li>
                <li>Se requiere al menos un <b>80% de asistencia</b> para tener derecho a examen final.</li>
              </ol>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=politicas_evaluacion" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "soporte_plataformas",
          patterns: [/soporte plataforma/, /ayuda plataforma/,
            /problema en netcampus/
          ],
          answer: `
            <div class="respuesta-bloque">
              <b>Soporte de plataformas:</b>
              <ol>
                <li>Verifica tu conexi√≥n a internet y actualiza la p√°gina.</li>
                <li>Consulta la secci√≥n de <b>Preguntas Frecuentes</b> en NetCampus.</li>
                <li>Si el problema persiste, env√≠a un correo a <i>soporte@universidad.edu</i> con captura de pantalla y descripci√≥n.</li>
                <li>Horario de atenci√≥n: lunes a viernes, 8:00‚Äì17:00.</li>
              </ol>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=soporte_plataformas" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "dato_curioso",
          patterns: [/dato curioso/, /curiosidad/],
          answer: `
            <div class="respuesta-bloque">
              ¬øSab√≠as que el primer curso en l√≠nea de la universidad se imparti√≥ en <b>2008</b>?
              Desde entonces, se han desarrollado m√°s de 300 cursos virtuales.
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=historia_cursos" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
          `
        },
        {
          id: "frase",
          patterns: [/frase motivadora/, /motivacion/, /inspir(a|acion)/],
          answer: `
        ‚Äú<i>El aprendizaje es un viaje continuo; cada pregunta es un paso hacia adelante.</i>‚Äù
      `
        },
        {
          id: "chiste",
          patterns: [/chiste/, /broma/],
          answer: `
            <div class="respuesta-bloque">
              ‚Äî ¬øPor qu√© el estudiante llev√≥ una escalera a clase?<br>
              ‚Äî ¬°Porque quer√≠a llegar al nivel superior! üòÑ
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
        <div class="boton-video">
          <a href="https://www.youtube.com/watch?v=humor_educativo" target="_blank" rel="noopener nofollow"
            style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
            üé• Ver video tutorial
          </a>
        </div>
      `
        },
        {
          id: "gracias",
          patterns: [/gracias/],
          answer: `
            <div class="respuesta-bloque">
              De nada, consultame cuando quieras! estoy aqu√≠ para ayudar üòÑ<br>
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
        <div class="boton-video">
          <a href="https://www.youtube.com/watch?v=ayuda_tac" target="_blank" rel="noopener nofollow"
            style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
            üé• Ver video tutorial
          </a>
        </div>
      `
        },
        {
          id: "despedida",
          patterns: [/bye/, /adios/, /hasta luego/, /gracias/, /nos vemos/],
          answer: `
            <div class="respuesta-bloque">
               ¬°Fue un gusto conversar contigo! üòä<br>
              Recuerda que la <b>Unidad TAC</b> siempre est√° aqu√≠ para apoyarte en tu aprendizaje y en el uso de NetCampus.<br>
               ¬°Te esperamos pronto para seguir innovando juntos! üöÄ
              <div class="boton-video">
                <a href="https://www.youtube.com/watch?v=despedida_tac" target="_blank" rel="noopener nofollow"
                  style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                  üé• Ver video tutorial
                </a>
              </div>
            </div>
    `
        },
        
        // -- Aqu√≠ comienzan las preguntas propuestas por Melvin  ---
        // ===============================
        // INTENTS NUEVOS (Docentes)
        // ===============================
        // 1) Activar automatriculaci√≥n en un curso
      {
        id: "prof_auto_matriculacion_activar",
        patterns: [
          /activar.*auto.*matricul/,
          /habilitar.*auto.*inscrip/,
          /inscripci(o|√≥)n.*autom(a|√°)tica/,
          /metodos.*inscrip.*auto/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Activar la automatriculaci√≥n en tu curso:</b>
            <ol>
              <li>Entra al curso y abre <b>Participantes</b>.</li>
              <li>En el men√∫ de <b>Participantes</b>, elige <b>M√©todos de inscripci√≥n</b>.</li>
              <li>Localiza <b>Automatriculaci√≥n (estudiante)</b> y haz clic en el <b>√≠cono de ojo</b> para activarla.</li>
              <li>Haz clic en el <b>engrane</b> para configurar: clave de inscripci√≥n (opcional), duraci√≥n de matr√≠cula, l√≠mites y mensaje de bienvenida.</li>
              <li>Guarda los cambios.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=automatriculacion" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video: Automatriculaci√≥n
              </a>
            </div>
          </div>
        `
      },

      // 2) Matricular usuarios manualmente
      {
        id: "prof_matricular_manual",
        patterns: [
          /matricular.*manual/,
          /inscribir.*manual/,
          /agregar.*usuario.*curso/,
          /anadir.*participante/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Matricular usuarios manualmente:</b>
            <ol>
              <li>Entra al curso ‚Üí <b>Participantes</b> ‚Üí <b>M√©todos de inscripci√≥n</b>.</li>
              <li>Verifica que <b>Matr√≠cula manual</b> est√° <b>activa</b> (ojo abierto).</li>
              <li>Haz clic en <b>Matricular usuarios</b> y busca a las personas.</li>
              <li>Asigna el <b>rol</b> (p. ej., Estudiante) y, si quieres, define <b>fecha/duraci√≥n</b> de matr√≠cula.</li>
              <li>Confirma con <b>Matricular usuarios seleccionados</b>.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=matricular_manual" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 3) A√±adir la descripci√≥n del curso (duplicado en doc, consolidado)
      {
        id: "prof_descripcion_curso",
        patterns: [
          /descripcion.*curso/,
          /resumen.*curso/,
          /presentacion.*curso/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>A√±adir/editar la descripci√≥n del curso:</b>
            <ol>
              <li>Entra al curso y abre <b>Configuraci√≥n del curso</b>.</li>
              <li>En <b>General</b>, edita el campo <b>Descripci√≥n</b> con objetivos, contenidos y metodolog√≠a.</li>
              <li>(Opcional) Adjunta <b>im√°genes/archivos</b> de apoyo.</li>
              <li>Guarda los cambios.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 4) Entregar tareas (perspectiva estudiante)
      {
        id: "alumno_entregar_tarea_20mb",
        patterns: [
          /c[o√≥]mo.*entregar.*tarea/i,
          /entregar.*tarea.*estudiante/i,
          /subir.*tarea.*estudiante/i,
          /enviar.*tarea.*20.*mb/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo entregar tareas (con l√≠mite de 20 MB):</b>
            <ol>
              <li>Ingresa al curso y selecciona la actividad Tarea.</li>
              <li>Lee las instrucciones y verifica la fecha l√≠mite.</li>
              <li>Haz clic en Agregar entrega.</li>
              <li>Adjunta el archivo desde tu computadora (m√°ximo 20 MB, seg√∫n configuraci√≥n del curso).</li>
              <li>Haz clic en Guardar cambios.</li>
              <li>Si lo deseas, selecciona Enviar tarea para confirmarla de forma definitiva.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 5) Resolver cuestionarios (estudiante)
      {
        id: "alumno_resolver_cuestionario",
        patterns: [
          /resolver.*cuestionario/,
          /rendir.*examen.*virtual/,
          /intentar.*cuestionario/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo resolver un cuestionario:</b>
            <ol>
              <li>Abre el <b>cuestionario</b> y revisa <b>apertura</b>, <b>l√≠mite de tiempo</b> e <b>intentos</b>.</li>
              <li>Haz clic en <b>Intentar resolver ahora</b>.</li>
              <li>Responde cada pregunta (opci√≥n m√∫ltiple, V/F, ensayo, etc.).</li>
              <li>Selecciona <b>Finalizar intento</b> y revisa tus respuestas.</li>
              <li>Confirma con <b>Enviar todo y terminar</b>.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=resolver_cuestionario" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 6) Configurar la calificaci√≥n del curso (libro de calificaciones)
      {
        id: "prof_calificaciones_configurar",
        patterns: [
          /configurar.*calificaci(o|√≥)n.*curso/,
          /ajust(es|ar).*libro.*calific/,
          /peso.*actividades.*calific/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Configurar el libro de calificaciones:</b>
            <ol>
              <li>Entra al curso ‚Üí <b>Calificaciones</b> ‚Üí <b>Ajustes del libro</b>/<b>Configuraci√≥n del curso</b>.</li>
              <li>Crea <b>categor√≠as</b> (p. ej., Ex√°menes, Tareas, Participaci√≥n).</li>
              <li>Define el <b>m√©todo de c√°lculo</b> (suma, media ponderada, etc.) y los <b>pesos</b>.</li>
              <li>Coloca cada actividad en su <b>categor√≠a</b> y verifica el <b>c√°lculo final</b>.</li>
              <li>Guarda los cambios y revisa el <b>Informe del calificador</b>.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=calificaciones_moodle" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 7) Crear una tarea (si ya existe, puedes unificar/actualizar el intent actual).
      //  Descripci√≥n: ESTA TIENE CONFLICTO con el intent "crear_tarea" de arriba, que es para estudiantes.
      {
        id: "prof_crear_tarea_pasoapaso",
        patterns: [
          /crear.*tarea.*docente/,
          /configurar.*tarea.*docente/,
          /actividad.*tarea.*docente/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear una tarea (docente):</b>
            <ol>
              <li>Activa la <b>edici√≥n</b> en el curso.</li>
              <li><b>A√±adir una actividad o un recurso</b> ‚Üí <b>Tarea</b>.</li>
              <li>Define <b>Nombre</b>, <b>Descripci√≥n</b> e <b>instrucciones</b>.</li>
              <li>Configura <b>fechas</b> (desde, entrega, l√≠mite) y <b>tama√±o m√°x. de archivo</b>.</li>
              <li>Ajusta <b>Calificaci√≥n</b> (puntuaci√≥n y categor√≠a) y <b>Tipos de entrega</b> (archivo/texto).</li>
              <li>Guarda con <b>Guardar y mostrar</b>.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=crear_tarea_docente" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 8) Foro: preguntas generadoras y configuraci√≥n b√°sica
      // CORREGIDO: Patrones m√°s flexibles para mejor coincidencia
      {
        id: "prof_foro_preguntas_generadoras",
        patterns: [
          /preguntas.*generadoras/,
          /foro.*preguntas/,
          /crear.*foro/,
          /foro.*debate/,
          /configurar.*foro/,
          /foro.*discusion/,
          /foro.*discusi√≥n/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear un foro con preguntas generadoras:</b>
            <ol>
              <li>Activa la <b>edici√≥n</b> ‚Üí <b>A√±adir actividad</b> ‚Üí <b>Foro</b>.</li>
              <li>Escribe <b>Nombre</b> y <b>Descripci√≥n</b> (instrucciones, reglas y tus preguntas generadoras).</li>
              <li>Elige <b>Tipo</b>: <i>Debate sencillo</i> para un √∫nico tema.</li>
              <li>Define <b>Disponibilidad</b> (fecha de entrega y fecha l√≠mite si requieres cierre).</li>
              <li>En <b>Adjuntos</b>, fija cantidad y tama√±o, y habilita el <b>recuento de palabras</b> si lo necesitas.</li>
              <li>En <b>Suscripci√≥n</b>, usa <i>forzosa</i> si quieres asegurar la participaci√≥n.</li>
              <li>En <b>Evaluaci√≥n</b>, asigna <b>Escala</b> o <b>puntos</b> seg√∫n tu r√∫brica.</li>
              <li><b>Guardar cambios y regresar al curso</b>.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=foro_preguntas_generadoras" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 9) Reutilizaci√≥n/Importaci√≥n de cursos
      {
        id: "prof_reutilizacion_importacion",
        patterns: [
          /reutilizaci(o|√≥)n.*curso/,
          /importar.*curso/,
          /copiar.*contenido.*curso/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Importar (reutilizar) contenido de otro curso:</b>
            <ol>
              <li>Abre <b>dos ventanas</b>: curso origen (viejo) y curso destino (vac√≠o).</li>
              <li>En el curso destino: <b>M√°s</b> ‚Üí <b>Reutilizaci√≥n de curso</b> ‚Üí <b>Importar</b>.</li>
              <li>Busca el curso origen por <b>c√≥digo</b> (p. ej., <i>ADM-3200-01</i>) y selecci√≥nalo.</li>
              <li>Elige qu√© <b>elementos copiar</b> (desmarca lo que no quieres: enlaces de Teams/WhatsApp, etc.).</li>
              <li>Revisa el resumen (verde = se copiar√°) y confirma con <b>Realizar la importaci√≥n</b>.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=importar_curso_moodle" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 10) Crear actividad H5P
      {
        id: "prof_crear_h5p",
        patterns: [
          /crear.*h5p/,
          /contenido.*interactivo.*h5p/,
          /agregar.*h5p/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear una actividad H5P:</b>
            <ol>
              <li>Activa <b>edici√≥n</b> ‚Üí <b>A√±adir actividad</b> ‚Üí <b>Contenido interactivo H5P</b>.</li>
              <li>Asigna un <b>nombre</b> y crea el contenido en el <b>editor H5P</b> o <b>sube</b> un archivo .h5p.</li>
              <li>Configura <b>calificaci√≥n</b>, <b>intentos</b> y <b>restricciones de acceso</b>.</li>
              <li>Guarda los cambios.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=crear_h5p_moodle" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 11) Reiniciar curso (reset)
      {
        id: "prof_reiniciar_curso",
        patterns: [
          /reiniciar.*curso/,
          /reset.*curso/,
          /revitalizar.*curso/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Reiniciar un curso para un nuevo ciclo:</b>
            <ol>
              <li>En el curso: <b>M√°s</b> ‚Üí <b>Reutilizaci√≥n de curso</b> ‚Üí <b>Reiniciar curso</b>.</li>
              <li>Elige qu√© <b>reiniciar</b>: calificaciones, actividades, usuarios, foros, etc.</li>
              <li>Confirma. El curso queda limpio para el nuevo ciclo, <b>manteniendo la estructura</b>.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=reiniciar_curso" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 12) Dise√±ar y aplicar cuestionarios (resumen docente)
      {
        id: "prof_diseniar_aplicar_cuestionarios",
        patterns: [
          /disenar.*cuestionario/,
          /aplicar.*cuestionario/,
          /configurar.*examen.*moodle/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Dise√±ar y aplicar un cuestionario:</b>
            <ol>
              <li>Activa <b>edici√≥n</b> ‚Üí <b>A√±adir actividad</b> ‚Üí <b>Cuestionario</b>.</li>
              <li>Define <b>nombre</b>, <b>descripci√≥n</b>, <b>tiempos</b> e <b>intentos</b>.</li>
              <li>Agrega preguntas nuevas o desde el <b>banco de preguntas</b>.</li>
              <li>Configura <b>calificaci√≥n</b> (p. ej., calificaci√≥n m√°s alta o promedio).</li>
              <li>Publica. Los estudiantes podr√°n responder seg√∫n las fechas establecidas.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=disenar_cuestionario" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 13) Filtrar entregas (calificadas/pendientes) en Tarea
      {
        id: "prof_filtrar_entregas_tarea",
        patterns: [
          /filtrar.*entregas/,
          /ver.*entregas.*calificadas/,
          /pendientes.*tarea/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Filtrar entregas en una Tarea:</b>
            <ol>
              <li>Abre la <b>Tarea</b> ‚Üí <b>Ver todas las entregas</b>.</li>
              <li>Usa los <b>filtros</b> para mostrar: <i>calificadas</i>, <i>pendientes</i>, <i>con retraso</i>.</li>
              <li>Gestiona y revisa m√°s r√°pido lo que necesitas evaluar.</li>
            </ol>
          </div>
        `
      },

      // 14) Penalizaciones por entregas tard√≠as
      {
        id: "prof_penalizacion_retraso",
        patterns: [
          /penalizaci(o|√≥)n.*tard[i√≠]as/,
          /descuento.*entrega.*tarde/,
          /fecha.*limite.*tarea/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Configurar penalizaci√≥n por entrega tard√≠a:</b>
            <ol>
              <li>En la <b>Tarea</b>, edita la actividad.</li>
              <li>Activa <b>Fecha l√≠mite</b> y establece la pol√≠tica de <b>penalizaci√≥n</b> (si tu configuraci√≥n la ofrece) o define el manejo de <b>env√≠os fuera de plazo</b>.</li>
              <li>Guarda y prueba con un usuario de ejemplo para validar el flujo.</li>
            </ol>
          </div>
        `
      },

      // 15) Crear cuestionario paso a paso (detalle)
      {
        id: "prof_crear_cuestionario_pasoapaso",
        patterns: [
          /crear.*cuestionario/,
          /nuevo.*cuestionario/,
          /configurar.*cuestionario/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear un cuestionario (paso a paso):</b>
            <ol>
              <li>Activa <b>edici√≥n</b> ‚Üí <b>A√±adir actividad</b> ‚Üí <b>Cuestionario</b> ‚Üí <b>Agregar</b>.</li>
              <li>Completa <b>Nombre</b> y <b>Descripci√≥n</b> (instrucciones claras para estudiantes).</li>
              <li>Define <b>apertura/cierre</b>, <b>tiempo l√≠mite</b> e <b>intentos permitidos</b>.</li>
              <li>Configura <b>calificaci√≥n</b> (puntaje m√°ximo, m√©todo de agregaci√≥n de intentos).</li>
              <li>Guarda y luego entra a <b>Editar cuestionario</b> para agregar preguntas (nuevas o del banco).</li>
              <li>Ordena preguntas y ajusta la <b>puntuaci√≥n</b> de cada una ‚Üí <b>Guardar</b> y publicar.</li>
            </ol>
          </div>
        `
      },

      // 16) Pre-crear/simular intentos (seg√∫n disponibilidad)
      {
        id: "prof_precrear_intentos",
        patterns: [
          /pre.*crear.*intentos/i,
          /precrear.*intentos/i,
          /simular.*intentos.*cuestionario/i,
          /probar.*cuestionario.*antes/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo puedo pre-crear intentos de cuestionarios en Moodle 5.0:</b>
            <ol>
              <li>Ingresa al curso y abre el cuestionario que deseas configurar.</li>
              <li>Ve a configuraci√≥n ‚Üí Calificaci√≥n ‚Üí Intentos permitidos.</li>
              <li>Configura el n√∫mero m√°ximo de intentos que cada estudiante podr√° realizar.</li>
              <li>Si deseas que ciertos intentos ya est√©n pre-creados para an√°lisis o pruebas, puedes utilizar la opci√≥n Simular intentos desde el cuestionario.</li>
              <li>Confirma los cambios. Esto permitir√° que los estudiantes tengan los intentos listos seg√∫n la configuraci√≥n, y tambi√©n podr√°s visualizar resultados de prueba.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // 17) Gestionar banco de preguntas
      {
        id: "prof_banco_preguntas_gestion",
        patterns: [
          /banco.*preguntas/,
          /gestionar.*preguntas.*cuestionario/,
          /importar.*exportar.*preguntas/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Gestionar el banco de preguntas:</b>
            <ol>
              <li>Ve a <b>Banco de preguntas</b> ‚Üí <b>Preguntas</b>.</li>
              <li><b>Crear:</b> <i>Agregar</i> ‚Üí tipo (opci√≥n m√∫ltiple, V/F, etc.), redacta enunciado, respuestas y calificaci√≥n ‚Üí <b>Guardar</b>.</li>
              <li><b>Duplicar:</b> selecciona la pregunta ‚Üí <b>Duplicar</b> ‚Üí ajusta y guarda.</li>
              <li><b>Filtrar:</b> por <b>categor√≠a</b>, <b>tipo</b> o <b>palabras clave</b> para encontrar m√°s r√°pido.</li>
              <li><b>Compartir:</b> <i>Exportar</i> (Moodle XML, GIFT) para usar en otros cursos; <i>Importar</i> para traer bancos externos.</li>
            </ol>
          </div>
        `
      },

      // 18) Accesibilidad: descripciones en im√°genes
      {
        id: "prof_accesibilidad_descripcion_imagen",
        patterns: [
          /accesibilidad.*imagen/,
          /descripcion.*larga.*imagen/,
          /texto.*alternativo.*imagen/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Accesibilidad en im√°genes (alt y descripci√≥n larga):</b>
            <ol>
              <li>En el editor, inserta o selecciona la <b>imagen</b>.</li>
              <li>Abre <b>Propiedades de la imagen</b> ‚Üí completa <b>Texto alternativo</b> (breve y descriptivo).</li>
              <li>Si necesitas m√°s detalle, agrega <b>Descripci√≥n larga</b> (Long description) con contexto y prop√≥sito.</li>
              <li>Guarda y verifica con un <b>lector de pantalla</b> si es posible.</li>
            </ol>
          </div>
        `
      },

      // 19) Plantillas de respaldo (backup)
      {
        id: "prof_plantillas_respaldo",
        patterns: [
          /plantilla.*respaldo/,
          /copia.*seguridad.*curso/,
          /backup.*curso/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear y usar plantillas de respaldo:</b>
            <ol>
              <li>En el curso: <b>M√°s</b> ‚Üí <b>Reutilizaci√≥n de curso</b> ‚Üí <b>Copia de seguridad</b>.</li>
              <li>Selecciona qu√© incluir: <b>actividades</b>, <b>bloques</b>, <b>calificaciones</b>, <b>usuarios</b>, etc.</li>
              <li>Guarda la <b>plantilla</b> con un nombre claro (p. ej., ‚ÄúRespaldo-base-sin-usuarios‚Äù).</li>
              <li>Reutiliza esa plantilla para crear <b>backups consistentes y r√°pidos</b>.</li>
            </ol>
          </div>
        `
      },

      // 20) EXTRA: Exportar calificaciones
      {
        id: "prof_exportar_calificaciones",
        patterns: [
          /exportar.*calificaci/,
          /descargar.*calificaci/,
          /informe.*calificador.*exportar/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Exportar calificaciones del curso:</b>
            <ol>
              <li>Entra a <b>Calificaciones</b> ‚Üí <b>Exportar</b>.</li>
              <li>Elige formato (CSV, XLSX, etc.) y <b>rango de √≠tems</b>.</li>
              <li>Configura separadores/encabezados si usas CSV.</li>
              <li>Haz clic en <b>Descargar</b> y verifica el archivo.</li>
            </ol>
          </div>
        `
      },

      // 21) EXTRA: Mostrar/Ocultar curso para estudiantes
      {
        id: "prof_mostrar_ocultar_curso",
        patterns: [
          /ocultar.*curso/,
          /mostrar.*curso/,
          /disponibilidad.*curso/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Ocultar o mostrar el curso a estudiantes:</b>
            <ol>
              <li>Abre <b>Configuraci√≥n del curso</b>.</li>
              <li>En <b>Visibilidad del curso</b>, elige <b>Ocultar</b> o <b>Mostrar</b>.</li>
              <li>Guarda. <span style="opacity:.85">√ötil antes del inicio o para mantenimiento.</span></li>
            </ol>
          </div>
        `
      },

      // 22) EXTRA: Ajustar tama√±o m√°ximo de archivo en Tarea
      {
        id: "prof_tarea_tamano_archivo",
        patterns: [
          /tam(a|√°)no.*archivo.*tarea/,
          /limite.*mb.*tarea/,
          /peso.*archivo.*tarea/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Cambiar el tama√±o m√°ximo de archivo en una Tarea:</b>
            <ol>
              <li>Editar la <b>Tarea</b> ‚Üí secci√≥n <b>Tipos de entrega</b>.</li>
              <li>Ajusta <b>Tama√±o m√°ximo de env√≠o</b> (p. ej., 20&nbsp;MB).</li>
              <li>Guarda y comunica el l√≠mite a tus estudiantes.</li>
            </ol>
          </div>
        `
      },

      // 23) EXTRA: Reabrir intento o dar intento extra en cuestionario
      {
        id: "prof_cuestionario_intento_extra",
        patterns: [
          /dar.*intento.*extra/,
          /reabrir.*intento.*cuestionario/,
          /permitir.*otro.*intento/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Conceder un intento extra en un cuestionario:</b>
            <ol>
              <li>Abre el <b>cuestionario</b> ‚Üí <b>Intentos</b> / <b>Resultados</b>.</li>
              <li>Localiza al estudiante y usa <b>anulaci√≥n de usuario</b> (override) para cambiar <b>intentos</b> y/o <b>tiempo</b>.</li>
              <li>Guarda. Informa al estudiante para que vuelva a ingresar.</li>
            </ol>
          </div>
        `
      },

      // R√∫bricas de evaluaci√≥n
      {
        id: "docente_rubricas_evaluacion",
        patterns: [/crear.*r[u√∫]brica/, /configurar.*r[u√∫]brica/, /evaluar.*r[u√∫]brica/, /matriz.*evaluaci[o√≥]n/],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear r√∫bricas de evaluaci√≥n en Moodle 5.0:</b>
            <ol>
              <li>Entra al curso y ve a <b>Calificaciones</b> ‚Üí <b>R√∫bricas</b>.</li>
              <li>Haz clic en <b>A√±adir nueva r√∫brica</b> y define un nombre descriptivo.</li>
              <li>Configura los <b>Criterios de evaluaci√≥n</b> (ej: "Contenido", "Organizaci√≥n", "Originalidad").</li>
              <li>Para cada criterio, define los <b>Niveles de desempe√±o</b> (ej: "Excelente", "Bueno", "Necesita mejorar") con sus puntajes y descripciones espec√≠ficas.</li>
              <li>Activa <b>Mostrar r√∫brica a los estudiantes</b> si deseas transparencia.</li>
              <li>Guarda la r√∫brica y as√≠gnala a una <b>Tarea</b> o <b>Cuestionario</b> en la configuraci√≥n de calificaci√≥n.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=rubricas_moodle5" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video: crear r√∫bricas
              </a>
            </div>
          </div>
        `
      },

      // Restricciones de acceso
      {
        id: "docente_restricciones_acceso",
        patterns: [/restricciones.*acceso/, /condiciones.*actividad/, /secuenciar.*curso/, /bloquear.*actividad/],
        answer: `
          <div class="respuesta-bloque">
            <b>Configurar restricciones de acceso en Moodle 5.0:</b>
            <ol>
              <li>Al crear o editar cualquier <b>actividad</b> (tarea, foro, cuestionario), ve a la secci√≥n <b>Restricciones de acceso</b>.</li>
              <li>Haz clic en <b>A√±adir restricci√≥n</b> y selecciona el tipo de condici√≥n (ej: fecha, calificaci√≥n previa, finalizaci√≥n de otra actividad).</li>
              <li>Ejemplos comunes:
                <ul>
                  <li><b>Por fecha</b>: "Hacer visible solo entre el 15 y 30 de octubre"</li>
                  <li><b>Por calificaci√≥n</b>: "Disponible solo si obtuvieron m√°s de 70% en la Tarea 1"</li>
                  <li><b>Por finalizaci√≥n</b>: "Disponible despu√©s de completar la Lecci√≥n 3"</li>
                </ul>
              </li>
              <li>Puedes combinar m√∫ltiples restricciones usando <b>Y/O</b> para l√≥gica compleja.</li>
              <li>Activa <b>Mostrar actividad incluso si las restricciones no se cumplen</b> para que los estudiantes vean lo que viene (con indicador de bloqueo).</li>
              <li>Guarda los cambios y prueba con una cuenta de estudiante.</li>
            </ol>
            <div style="background:#e8f5e9;padding:10px;border-radius:8px;margin-top:8px;font-size:0.9em">
              üí° <strong>Consejo:</strong> Usa restricciones para crear itinerarios de aprendizaje adaptativo y evitar que los estudiantes avancen sin cumplir requisitos.
            </div>
          </div>
        `
      },

      // Retroalimentaci√≥n masiva
      {
        id: "docente_retroalimentacion_masiva",
        patterns: [/retroalimentacion.*masiva/, /comentarios.*varios.*estudiantes/, /calificar.*rapido/, /feedback.*grupo/],
        answer: `
          <div class="respuesta-bloque">
            <b>Dar retroalimentaci√≥n masiva en Moodle 5.0:</b>
            <ol>
              <li>En cualquier <b>Tarea</b>, haz clic en <b>Ve a la p√°gina de calificaciones</b> o <b>Ver todas las entregas</b>.</li>
              <li>Selecciona m√∫ltiples estudiantes:
                <ul>
                  <li>Usa las casillas de selecci√≥n junto a cada nombre.</li>
                  <li>O selecciona un grupo espec√≠fico usando los filtros.</li>
                </ul>
              </li>
              <li>Con estudiantes seleccionados, haz clic en <b>Elegir acci√≥n</b> ‚Üí <b>Descargar entregas seleccionadas</b> para calificar offline.</li>
              <li>Para retroalimentaci√≥n en l√≠nea:
                <ul>
                  <li>Selecciona <b>Calificar varias entregas</b>.</li>
                  <li>Usa la interfaz de hoja de c√°lculo para a√±adir comentarios r√°pidos y calificaciones.</li>
                  <li>Puedes usar <b>Plantillas de comentarios</b> guardadas previamente para ahorrar tiempo.</li>
                </ul>
              </li>
              <li>Para comentarios de audio/video:
                <ul>
                  <li>Instala el plugin <b>Audio Feedback</b> o <b>Video Feedback</b>.</li>
                  <li>Al calificar, ver√°s un bot√≥n de micr√≥fono o c√°mara para grabar retroalimentaci√≥n personalizada.</li>
                </ul>
              </li>
              <li>Al finalizar, haz clic en <b>Guardar cambios</b> y los estudiantes recibir√°n notificaci√≥n con tu retroalimentaci√≥n.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=retroalimentacion_moodle5" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video: retroalimentaci√≥n eficiente
              </a>
            </div>
          </div>
        `
      },

      // Reportes de participaci√≥n
      {
        id: "docente_reportes_participacion",
        patterns: [/reporte.*participacion/, /seguimiento.*estudiante/, /analisis.*actividad/, /estadisticas.*curso/],
        answer: `
          <div class="respuesta-bloque">
            <b>Generar reportes de participaci√≥n en Moodle 5.0:</b>
            <ol>
              <li>En el curso, ve a <b>M√°s</b> ‚Üí <b>Reportes</b>.</li>
              <li>Tipos de reportes disponibles:
                <ul>
                  <li><b>Actividad de usuario</b>: Muestra todas las acciones de un estudiante en el curso.</li>
                  <li><b>Completaci√≥n de actividades</b>: Muestra qu√© estudiantes completaron cada actividad.</li>
                  <li><b>Registros</b>: Reporte detallado de todas las acciones en el curso con filtros por fecha, usuario y actividad.</li>
                  <li><b>Estad√≠sticas de participaci√≥n</b>: Gr√°ficos del tiempo de conexi√≥n y actividades realizadas por estudiante.</li>
                </ul>
              </li>
              <li>Selecciona el reporte deseado y aplica filtros espec√≠ficos (fecha, usuario, grupo).</li>
              <li>Para exportar: haz clic en <b>Descargar</b> (formatos: CSV, Excel, PDF).</li>
              <li>Configura <b>Alertas autom√°ticas</b>: En <b>Calificaciones</b> ‚Üí <b>Configuraci√≥n</b>, activa notificaciones cuando un estudiante no haya entregado tareas o tenga bajas calificaciones.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=reportes_moodle5" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video: usar reportes
              </a>
            </div>
          </div>
        `
      },

      // Integraci√≥n de herramientas externas
      {
        id: "docente_integracion_herramientas",
        patterns: [/integrar.*zoom/, /microsoft.*teams/, /google.*drive/, /herramientas.*externas/, /videoconferencia/],
        answer: `
          <div class="respuesta-bloque">
            <b>Integrar herramientas externas en Moodle 5.0:</b>
            <ol>
              <li>Para <strong>Zoom</strong>:
                <ul>
                  <li>Ve a <b>Preferencias del sitio</b> ‚Üí <b>Plugins</b> ‚Üí <b>Zoom</b> y configura con tus credenciales de cuenta.</li>
                  <li>En tu curso, activa edici√≥n ‚Üí <b>A√±adir actividad</b> ‚Üí <b>Zoom Meeting</b>.</li>
                  <li>Configura horario, duraci√≥n y opciones de grabaci√≥n.</li>
                </ul>
              </li>
              <li>Para <strong>Google Drive</strong>:
                <ul>
                  <li>En <b>Configuraci√≥n del perfil</b> ‚Üí <b>Fuentes de archivos</b>, activa Google Drive.</li>
                  <li>Al adjuntar archivos en cualquier actividad, selecciona <b>Google Drive</b> como fuente.</li>
                  <li>Para compartir documentos editables: usa la actividad <b>Google Docs</b> (instala plugin si no viene por defecto).</li>
                </ul>
              </li>
              <li>Para <strong>Microsoft Teams</strong>:
                <ul>
                  <li>Configura la integraci√≥n en <b>Administraci√≥n del sitio</b> ‚Üí <b>Plugins</b> ‚Üí <b>Teams</b>.</li>
                  <li>Crea una actividad <b>Teams Meeting</b> para videoconferencias sincr√≥nicas.</li>
                  <li>Usa el bloque <b>Teams Assignments</b> para sincronizar tareas entre ambas plataformas.</li>
                </ul>
              </li>
            </ol>
            <div style="background:#e3f2fd;padding:10px;border-radius:8px;margin-top:8px;font-size:0.9em">
              ‚ö†Ô∏è <strong>Importante:</strong> Consulta con el administrador de tu instituci√≥n antes de instalar plugins, ya que requiere permisos a nivel de sitio.
            </div>
          </div>
        `
      },

      // Completaci√≥n de actividades
      {
        id: "docente_completacion_actividades",
        patterns: [/completacion.*actividad/, /seguimiento.*progreso/, /actividad.*completa/, /marcar.*completado/],
        answer: `
          <div class="respuesta-bloque">
            <b>Configurar seguimiento de completaci√≥n en Moodle 5.0:</b>
            <ol>
              <li>Activa <b>Edici√≥n</b> en el curso y ve a <b>Configuraci√≥n del curso</b>.</li>
              <li>En <b>Completaci√≥n del curso</b>, selecciona <b>S√≠</b> para habilitar el seguimiento.</li>
              <li>Para configurar por actividad:
                <ul>
                  <li>Edita cualquier actividad (p√°gina, tarea, foro).</li>
                  <li>Ve a la secci√≥n <b>Completaci√≥n de la actividad</b>.</li>
                  <li>Selecciona <b>Mostrar completaci√≥n de la actividad</b>.</li>
                  <li>Define los criterios de completaci√≥n:
                    <ul>
                      <li><strong>Estudiante debe ver esta actividad</strong></li>
                      <li><strong>Estudiante debe entregar la tarea</strong></li>
                      <li><strong>Estudiante debe publicar en el foro</strong></li>
                      <li><strong>Obtener una calificaci√≥n m√≠nima</strong></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>Guarda los cambios. Los estudiantes ver√°n ‚úì al completar cada actividad.</li>
              <li>Como docente, ve a <b>Administraci√≥n del curso</b> ‚Üí <b>Informes</b> ‚Üí <b>Completaci√≥n del curso</b> para monitorear el progreso de todos los estudiantes.</li>
            </ol>
            <div style="background:#fff8e1;padding:10px;border-radius:8px;margin-top:8px;font-size:0.9em">
              üí° <strong>Tip:</strong> Combina con <b>Restricciones de acceso</b> para crear recorridos de aprendizaje secuenciales donde los estudiantes deben completar una actividad antes de acceder a la siguiente.
            </div>
          </div>
        `
      },

      // Accesibilidad en Moodle
      {
        id: "docente_accesibilidad_moodle",
        patterns: [/accesibilidad/, /wai-aria/, /lector pantalla/, /normas wcag/, /contenido accesible/],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear contenido accesible en Moodle 5.0:</b>
            <ol>
              <li><strong>Texto alternativo en im√°genes:</strong> Siempre agrega descripciones breves en el campo "Texto alternativo" y usa "Descripci√≥n larga" para im√°genes complejas.</li>
              <li><strong>Estructura sem√°ntica:</strong> Usa encabezados (H1, H2, H3) en tus p√°ginas y actividades, no solo estilos visuales.</li>
              <li><strong>Contraste de colores:</strong> Verifica que el contraste entre texto y fondo cumpla con WCAG 2.1 (m√≠nimo 4.5:1 para texto normal).</li>
              <li><strong>Contenido multimedia:</strong> A√±ade subt√≠tulos a videos y transcripciones a audios.</li>
              <li><strong>Documentos accesibles:</strong> Al subir PDFs o Word, usa la herramienta "Comprobar accesibilidad" antes de publicar.</li>
              <li><strong>Prueba con lectores de pantalla:</strong> Usa NVDA (gratuito) o VoiceOver para probar c√≥mo navegan tus estudiantes con discapacidad visual.</li>
            </ol>
            <div class="consejo-importante">
              üí° <strong>Importante:</strong> La accesibilidad no es solo un requisito legal, es una pr√°ctica inclusiva que mejora la experiencia para todos los estudiantes.
            </div>
          </div>
        `
      },

      // Badges e insignias
      {
        id: "docente_badges_insignias",
        patterns: [/badges/, /insignias/, /reconocimientos/, /certificados digitales/, /gamificacion/],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear y gestionar badges en Moodle 5.0:</b>
            <ol>
              <li><strong>Habilitar badges:</strong> Ve a <b>Administraci√≥n del sitio ‚Üí Caracter√≠sticas ‚Üí Badges</b> y activa la funci√≥n (requiere permisos de administrador).</li>
              <li><strong>Crear un badge:</strong> En tu curso, ve a <b>M√°s ‚Üí Badges</b> y haz clic en <b>A√±adir un nuevo badge</b>.</li>
              <li><strong>Configurar criterios:</strong> Define c√≥mo se obtendr√°:
                <ul>
                  <li><strong>Manual:</strong> T√∫ decides cu√°ndo entregarlo a cada estudiante.</li>
                  <li><strong>Autom√°tico:</strong> Se entrega al completar actividades (p. ej., terminar todas las tareas, obtener 90% en cuestionarios).</li>
                </ul>
              </li>
              <li><strong>Dise√±ar el badge:</strong> Sube una imagen PNG con fondo transparente (300x300 p√≠xeles) o usa un dise√±o simple con texto.</li>
              <li><strong>Visibilidad:</strong> Decide si los estudiantes pueden compartir sus badges en redes sociales o plataformas como Mozilla Backpack.</li>
              <li><strong>Notificaci√≥n:</strong> Los estudiantes recibir√°n un mensaje cuando obtengan un badge y podr√°n verlos en su perfil.</li>
            </ol>
          </div>
        `
      },

      // Cuestionarios aleatorios
      {
        id: "docente_cuestionarios_aleatorios",
        patterns: [/cuestionario.*aleatorio/i, /preguntas.*aleatorias/i, /examen.*aleatorio/i, /seleccion.*aleatoria.*preguntas/i, /barajar.*preguntas/i],
        answer: `
          <div class="respuesta-bloque">
            <b>Crear cuestionarios con preguntas aleatorias:</b>
            <ol>
              <li><strong>Preparar el banco de preguntas:</strong> Ve a <b>Banco de preguntas ‚Üí Preguntas</b> y aseg√∫rate de tener suficientes preguntas en tus categor√≠as.</li>
              <li><strong>Crear el cuestionario:</strong> Activa edici√≥n ‚Üí <b>A√±adir actividad ‚Üí Cuestionario</b>.</li>
              <li><strong>Agregar preguntas aleatorias:</strong> En <b>Editar cuestionario</b>, haz clic en <b>A√±adir ‚Üí Desde el banco de preguntas</b>.</li>
              <li><strong>Configurar selecci√≥n aleatoria:</strong>
                <ul>
                  <li>Selecciona la <b>categor√≠a</b> de preguntas.</li>
                  <li>Marca <b>Incluir subcategor√≠as</b> si aplica.</li>
                  <li>Define <b>n√∫mero de preguntas a seleccionar aleatoriamente</b>.</li>
                  <li>Activa <b>Barajar las preguntas</b> para que el orden sea diferente para cada estudiante.</li>
                </ul>
              </li>
              <li><strong>Ventajas:</strong>
                <ul>
                  <li>Evita el fraude: cada estudiante recibe preguntas diferentes.</li>
                  <li>Cubre mejor el temario: selecciona preguntas de todo el contenido.</li>
                  <li>Ahorra tiempo: no necesitas crear m√∫ltiples versiones del examen.</li>
                </ul>
              </li>
              <li><strong>Prueba primero:</strong> Siempre haz una <b>Vista previa</b> para verificar que la selecci√≥n aleatoria funciona correctamente.</li>
            </ol>
          </div>
        `
      },

      // 24) EXTRA: Permitir reenv√≠o (reapertura) de tarea
      {
        id: "prof_tarea_reenvio",
        patterns: [
          /permitir.*reenv[i√≠]o.*tarea/,
          /reabrir.*tarea/,
          /otro.*env[i√≠]o.*tarea/
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Permitir reenv√≠o de una Tarea:</b>
            <ol>
              <li>Editar la <b>Tarea</b> ‚Üí ajusta <b>Fecha de entrega</b>/<b>Fecha l√≠mite</b> o habilita <b>Requerir que los estudiantes hagan clic en Enviar</b> para controlar estados.</li>
              <li>En <b>Calificaci√≥n</b>, habilita <b>flujo de calificaci√≥n</b> si quieres controlar la liberaci√≥n de notas.</li>
              <li>Guarda y avisa al estudiante que ya puede volver a enviar.</li>
            </ol>
          </div>
        `
      },

      // Pregunta 11 estudiantes: fechas naturales
      {
        id: "alumno_fechas_naturales",
        patterns: [
          /fechas.*hoy.*ma[√±n]ana.*ayer/i,
          /formato.*fechas.*curso/i,
          /qu[e√©].*significa.*hoy.*ma[√±n]ana/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Fechas naturales en Moodle 5.0:</b>
            <ul>
              <li>En Moodle 5.0, las fechas de las actividades y eventos aparecen con un formato natural:</li>
              <li>Hoy: actividades que vencen en el mismo d√≠a.</li>
              <li>Ma√±ana: pr√≥ximas actividades.</li>
              <li>Ayer: actividades pasadas.</li>
              <li>Esto facilita la comprensi√≥n del calendario.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // Pregunta 6 estudiantes: descripci√≥n del curso
      {
        id: "alumno_ver_descripcion_curso",
        patterns: [
          /ver.*descripci[o√≥]n.*curso/i,
          /d[o√≥]nde.*descripci[o√≥]n.*curso/i,
          /informaci[o√≥]n.*curso/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>D√≥nde puedo ver la descripci√≥n de un curso:</b>
            <ul>
              <li>Ingresa a la p√°gina principal del curso.</li>
              <li>La descripci√≥n del curso se encuentra en la parte superior o en la secci√≥n inicial.</li>
              <li>All√≠ ver√°s los objetivos, criterios de evaluaci√≥n y actividades programadas.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // Docente 18: Etiquetas
      {
        id: "docente_etiquetas_uso",
        patterns: [
          /qu[e√©].*son.*etiquetas/i,
          /c[o√≥]mo.*usar.*etiquetas/i,
          /[a√°]rea.*texto.*medios/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Qu√© son las etiquetas y c√≥mo usarlas:</b>
            <ul>
              <li>Las etiquetas en Moodle son un recurso que permite a√±adir texto, im√°genes, videos o enlaces directamente en la p√°gina del curso.</li>
              <li>Para insertarlas:</li>
              <li>Activa la edici√≥n en el curso.</li>
              <li>Haz clic en A√±adir una actividad o recurso en la secci√≥n deseada.</li>
              <li>Selecciona √Årea de texto y medios.</li>
              <li>Escribe el contenido: puede ser un t√≠tulo, una nota, un recordatorio, una imagen o un video incrustado.</li>
              <li>Guarda los cambios.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // Docente 19: Banco de preguntas
      {
        id: "docente_banco_preguntas_uso",
        patterns: [
          /c[o√≥]mo.*usar.*banco.*preguntas/i,
          /banco.*preguntas.*moodle/i,
          /gestionar.*preguntas/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo usar el banco de preguntas:</b>
            <ul>
              <li>Entender los niveles del banco de preguntas: Nivel del sistema, Nivel de categor√≠a, Nivel del curso.</li>
              <li>Acceder al banco de preguntas: Ve a tu curso, en M√°s selecciona Banco de preguntas.</li>
              <li>Crear una nueva pregunta: Selecciona tipo (opci√≥n m√∫ltiple, verdadero/falso, etc.), configura y guarda.</li>
              <li>Exportar e importar preguntas: Usa pesta√±as Exportar/Importar con formato Moodle XML.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // Docente 20: Crear nueva pregunta
      {
        id: "docente_crear_pregunta_banco",
        patterns: [
          /crear.*nueva.*pregunta.*banco/i,
          /agregar.*pregunta.*banco/i,
          /nueva.*pregunta.*cuestionario/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo crear una nueva pregunta en el banco de preguntas:</b>
            <ul>
              <li>Dentro del banco de preguntas, haz clic en el bot√≥n Crear una nueva pregunta.</li>
              <li>Moodle te presentar√° una variedad de tipos de preguntas para elegir: Opci√≥n m√∫ltiple, Verdadero/Falso, Emparejamiento, Respuesta corta, Ensayo.</li>
              <li>Selecciona el tipo de pregunta que deseas y haz clic en A√±adir.</li>
              <li>Configura la pregunta: nombre de la pregunta, enunciado de la pregunta, opciones de respuesta.</li>
              <li>Haz clic en Guardar cambios. La nueva pregunta se guardar√° en tu banco.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // Docente 21: Exportar e importar preguntas
      {
        id: "docente_exportar_importar_preguntas",
        patterns: [
          /exportar.*preguntas/i,
          /importar.*preguntas/i,
          /transferir.*preguntas/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo exportar e importar preguntas:</b>
            <ul>
              <li>Exportar preguntas: En el banco de preguntas, haz clic en la pesta√±a Exportar. Selecciona el formato de archivo deseado (Moodle XML es el m√°s com√∫n). Elige la categor√≠a que deseas exportar y haz clic en Exportar preguntas a archivo.</li>
              <li>Importar preguntas: En el banco de preguntas, haz clic en la pesta√±a Importar. Selecciona el formato de archivo (por ejemplo, Moodle XML). Arrastra y suelta el archivo o utiliza el selector de archivos para subirlo desde tu computadora. Haz clic en Importar para a√±adir las preguntas a tu banco.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // Docente 22: Poner nombre a un curso
      {
        id: "docente_nombre_curso",
        patterns: [
          /poner.*nombre.*curso/i,
          /cambiar.*nombre.*curso/i,
          /t[i√≠]tulo.*curso/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo poner nombre a un curso (consejos):</b>
            <ul>
              <li>Al crear o editar un curso, ingresa a Configuraci√≥n del curso.</li>
              <li>En el campo Nombre completo del curso, escribe el t√≠tulo que se mostrar√° a los estudiantes.</li>
              <li>En Nombre corto del curso, coloca una versi√≥n abreviada (ejemplo: MAT101).</li>
              <li>Guarda los cambios.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // Docente 24: Configurar grupos
      {
        id: "docente_configurar_grupos",
        patterns: [
          /configurar.*grupos.*estudiantes/i,
          /crear.*grupos.*curso/i,
          /agrupamientos/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo configurar grupos de estudiantes:</b>
            <ul>
              <li>En el curso, ve a Participantes ‚Üí Grupos.</li>
              <li>Haz clic en Crear grupo y define nombre, descripci√≥n y modo de membres√≠a (manual o autom√°tica).</li>
              <li>Para grupos autom√°ticos: selecciona Auto-asignar grupos y define el n√∫mero de grupos o estudiantes por grupo.</li>
              <li>Para asignaci√≥n manual: haz clic en el grupo creado ‚Üí Agregar/eliminar usuarios y selecciona estudiantes.</li>
              <li>Para crear Agrupamientos: ve a Agrupamientos ‚Üí Crear agrupamiento y a√±ade los grupos deseados.</li>
              <li>Al crear actividades, en Configuraci√≥n com√∫n, selecciona Disponibilidad grupal y asigna al grupo o agrupamiento.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      }
      ,

      // Aqui comienzan las preguntas dise√±adas para los estudiantes las que paso Melvin.
      // ---------------------------------------------------------
      // Permite al estudiante editar su perfil (datos b√°sicos).
      // Patrones: verbos comunes (modificar/editar/cambiar) + "perfil".
      // Nota: mantenemos t√©rminos gen√©ricos para capturar variaciones.
      // ---------------------------------------------------------
      {
        id: "alumno_modificar_perfil",
        patterns: [
          /modificar.*perfil/i,
          /editar.*perfil.*estudiante/i,
          /cambiar.*informaci[o√≥]n.*perfil/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo modificar tu perfil:</b>
            <ul>
              <li>Inicia sesi√≥n en la plataforma.</li>
              <li>Haz clic en tu nombre o tu foto en la esquina superior.</li>
              <li>Selecciona Perfil.</li>
              <li>En la p√°gina de tu perfil, pulsa en Editar perfil.</li>
              <li>Podr√°s cambiar: nombre, apellidos, direcci√≥n de correo, descripci√≥n personal, idioma preferido, etc.</li>
              <li>Una vez hechos los cambios, selecciona Guardar cambios.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // -----------------------------------------------------------------
      // Cambiar/a√±adir foto de perfil.
      // Patrones: "agregar/subir/cambiar" + "foto" + "perfil".
      // Consejo: si tu UI usa compresi√≥n/recorte, podr√≠as enlazar un tip.
      // -----------------------------------------------------------------
      {
        id: "alumno_foto_perfil",
        patterns: [
          /agregar.*foto.*perfil/i,
          /subir.*foto.*perfil/i,
          /cambiar.*foto.*perfil/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo a√±adir una foto a tu perfil:</b>
            <ul>
              <li>Accede a tu perfil como en el paso anterior.</li>
              <li>En Editar perfil, busca la secci√≥n Imagen del usuario.</li>
              <li>Arrastra y suelta tu foto en el √°rea designada o selecciona Agregar archivo.</li>
              <li>Haz clic en Guardar cambios.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // --------------------------------------------------------------------
      // Recuperaci√≥n de contrase√±a (flujo est√°ndar de "olvid√© mi contrase√±a").
      // Patrones: cubrir "recuperar", "olvid√©", "resetear" + (contrase√±a/clave).
      // Nota: incluimos (√±/n) y acentos en regex para robustez b√°sica.
      // --------------------------------------------------------------------
      {
        id: "alumno_recuperar_contrasena",
        patterns: [
          /recuperar.*contrase[n√±]a/i,
          /olvid[e√©].*clave/i,
          /resetear.*clave/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo recuperar la contrase√±a:</b>
            <ul>
              <li>En la pantalla de inicio de sesi√≥n, selecciona la opci√≥n ¬øOlvid√≥ su nombre de usuario o contrase√±a?</li>
              <li>Ingresa tu direcci√≥n de correo registrada o tu nombre de usuario.</li>
              <li>Recibir√°s un mensaje de correo con un enlace para restablecer la contrase√±a.</li>
              <li>Haz clic en el enlace y crea una nueva clave de acceso.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // ----------------------------------------------------------------------
      // Explica qu√© son las "etiquetas" (√°rea de texto y medios) en el curso.
      // Patrones: consultas tipo "¬øqu√© son?" y verbos "usar/insertar".
      // Nota: √∫til para estudiantes curiosos y tambi√©n asistentes de c√°tedra.
      // ----------------------------------------------------------------------
      {
        id: "alumno_etiquetas",
        patterns: [
          /qu[e√©].*son.*etiquetas/i,
          /usar.*etiquetas.*curso/i,
          /insertar.*texto.*imagen.*curso/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>Usar etiquetas en un curso:</b>
            <ol>
              <li>Activa la <b>edici√≥n</b> en el curso.</li>
              <li>Haz clic en <b>A√±adir actividad o recurso</b>.</li>
              <li>Selecciona <b>√Årea de texto y medios</b> (etiqueta).</li>
              <li>Escribe el contenido: texto, imagen, video o enlace.</li>
              <li>Guarda los cambios.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=etiquetas_moodle" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // -------------------------------------------------------------
      // Auto-matriculaci√≥n (sin o con clave si el curso la requiere).
      // Patrones: "auto-matricular", "inscripci√≥n autom√°tica", "unirme".
      // Consejo: en tu instancia cambia "Moodle" por "Sinapsis" si aplica.
      // -------------------------------------------------------------

      //Esta tiene conflicto con el intent "matricularme con clave" de arriba.
      // Lo ideal ser√≠a unificar ambos en uno solo, pero como no tengo claro el flujo
      {
        id: "alumno_autoregistro",
        patterns: [
          /auto.*matricul(ar|aci[o√≥]n)/i,
          /inscripci[o√≥]n.*autom[a√°]tica/i,
          /unirme.*curso.*sin.*clave/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo puedo auto matricularme en un curso:</b>
            <ul>
              <li>Inicia sesi√≥n en Sinapsis.</li>
              <li>Ve al listado de cursos disponibles.</li>
              <li>Haz clic en el curso al que deseas unirte.</li>
              <li>Si el curso tiene activada la auto-matriculaci√≥n, aparecer√° un bot√≥n "Matricularme".</li>
              <li>Si se requiere una clave de acceso, introd√∫cela y confirma.</li>
              <li>Una vez matriculado, el curso aparecer√° en tu p√°gina principal.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // -------------------------------------------------------------------
      // Matriculaci√≥n cuando el curso tiene clave (incluye fuente de claves).
      // Patrones: "matricularme con clave", "acceso con clave", "inscribirme".
      // Nota: personaliza el paso de "d√≥nde ver claves" a tu instituci√≥n.
      // -------------------------------------------------------------------

      //Esta tiene conflicto con el intent "matricularme con clave" de arriba.
      // Lo ideal ser√≠a unificar ambos en uno solo, pero como no tengo claro el flujo
      {
        id: "alumno_matricula_clave",
        patterns: [
          /matricul(ar|aci[o√≥]n).*clave/i,
          /inscribirme.*clave/i,
          /acceso.*curso.*clave/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo puedo matricularme si el curso tiene clave:</b>
            <ul>
              <li>Inicia sesi√≥n en Sinapsis.</li>
              <li>Ve al listado de cursos disponibles.</li>
              <li>Haz clic en el curso al que deseas unirte.</li>
              <li>Si el curso tiene clave, dir√≠gete a la p√°gina de la "Universidad de Sonsonate", ve a servicios y busca "Horarios de Claves de Sinapsis y Teams".</li>
              <li>Ingresa en esa secci√≥n y busca por d√≠a la clave de la materia que necesitas.</li>
              <li>Regresa a Sinapsis y introduce la clave de acceso y confirma.</li>
              <li>Una vez matriculado, el curso aparecer√° en tu p√°gina principal.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // -------------------------------------------------
      // D√≥nde ver las calificaciones del curso (libreta).
      // Patrones: "ver notas/calificaciones".
      // -------------------------------------------------
      {
        id: "alumno_ver_calificaciones",
        patterns: [
          /ver.*calificaciones/i,
          /notas.*curso/i,
          /calificaci[o√≥]n.*tareas/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>D√≥nde veo mis calificaciones:</b>
            <ul>
              <li>En el curso, abre el men√∫ lateral.</li>
              <li>Haz clic en "Calificaciones".</li>
              <li>Se mostrar√° la libreta de calificaciones con tus tareas, cuestionarios y la retroalimentaci√≥n del profesor.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // ----------------------------------------------
      // Participaci√≥n en foros (crear y responder).
      // Patrones: "participar/publicar/debate".
      // ----------------------------------------------

      // CORREGIDO: Patrones m√°s flexibles para mejor coincidencia
      {
        id: "alumno_foro_participar",
        patterns: [
          /participar.*foro/i,
          /foro.*participar/i,
          /publicar.*foro/i,
          /foro.*publicar/i,
          /debate.*foro/i,
          /foro.*debate/i,
          /escribir.*foro/i,
          /foro.*escribir/i,
          /mensaje.*foro/i,
          /foro.*mensaje/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo participo en un foro:</b>
            <ul>
              <li>Dentro del curso, localiza la actividad Foro.</li>
              <li>Haz clic en el t√≠tulo del foro.</li>
              <li>Selecciona un tema ya existente o pulsa "A√±adir un nuevo tema de discusi√≥n".</li>
              <li>Escribe el asunto y tu mensaje.</li>
              <li>Puedes adjuntar archivos o im√°genes.</li>
              <li>Haz clic en "Enviar al foro".</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // -------------------------------------------------------------------
      // Notificaciones y retroalimentaci√≥n (campana + preferencias).
      // Patrones: t√©rminos gen√©ricos "notificaciones/avisos/mensajes".
      // -------------------------------------------------------------------
      {
        id: "alumno_notificaciones",
        patterns: [
          /notificaciones/i,
          /avisos.*plataforma/i,
          /mensajes.*moodle/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo recibo notificaciones y retroalimentaci√≥n:</b>
            <ul>
              <li>Revisa la campana de notificaciones en la barra superior.</li>
              <li>Ah√≠ ver√°s avisos de nuevas tareas, calificaciones o mensajes.</li>
              <li>Tambi√©n puedes activar notificaciones por correo electr√≥nico o SMS desde tu perfil ‚Üí Preferencias ‚Üí Preferencias de Notificaciones.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // -------------------------------------------------------
      // Ordenar/organizar cursos en el √°rea personal del alumno.
      // Patrones: "ordenar/organizar/ver ordenados".
      // -------------------------------------------------------
      {
        id: "alumno_ordenar_cursos",
        patterns: [
          /ordenar.*cursos/i,
          /organizar.*cursos/i,
          /ver.*cursos.*ordenados/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo puedo ordenar mis cursos:</b>
            <ul>
              <li>Ve a la p√°gina principal de tu √°rea personal.</li>
              <li>En la secci√≥n "Mis cursos", usa las opciones de ordenamiento.</li>
              <li>Selecciona ordenar por fecha de inicio o alfab√©ticamente.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // --------------------------------------------------------------------
      // Consultar entregas y penalizaciones por retraso en tareas.
      // Patrones: "consultar/ver/revisar" + "entregas/retraso".
      // --------------------------------------------------------------------
      {
        id: "alumno_consultar_entregas",
        patterns: [
          /consultar.*entregas/i,
          /ver.*tareas.*entregadas/i,
          /revisar.*retraso.*tareas/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>C√≥mo consultar mis entregas y penalizaciones por retraso:</b>
            <ul>
              <li>Ingresa a tu curso.</li>
              <li>Dir√≠gete a la secci√≥n Tareas o Actividades.</li>
              <li>Haz clic en la tarea que deseas revisar.</li>
              <li>Ver√°s tu fecha de entrega, el estado de la entrega y cualquier retroalimentaci√≥n del docente.</li>
              <li>Si hubo retraso en la entrega, Moodle mostrar√° las penalizaciones aplicadas autom√°ticamente seg√∫n la configuraci√≥n de la tarea.</li>
            </ul>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=placeholder" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },

      // --------------------------------------------------------------------------------
      // Reproducci√≥n de contenidos H5P en app m√≥vil (autoplay sujeto a compatibilidad).
      // Patrones: "h5p m√≥vil", "reproducir h5p app", "h5p autom√°tico".
      // Nota: aclaramos que no todos los tipos admiten autoplay por restricciones.
      // --------------------------------------------------------------------------------
      {
        id: "alumno_h5p_movil",
        patterns: [
          /h5p.*m[o√≥]vil/i,
          /reproducir.*h5p.*app/i,
          /h5p.*autom[a√°]tico/i
        ],
        answer: `
          <div class="respuesta-bloque">
            <b>H5P en la app m√≥vil:</b>
            <ol>
              <li>Abre la actividad H5P en la app Moodle.</li>
              <li>Si el contenido permite reproducci√≥n autom√°tica, habil√≠tala desde el editor H5P en la web.</li>
              <li>Ten en cuenta que no todos los contenidos H5P admiten autoplay en m√≥viles.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=h5p_movil" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video tutorial
              </a>
            </div>
          </div>
        `
      },



      // Descargar materiales offline
      {
        id: "alumno_descargar_offline",
        patterns: [/descargar materiales/, /offline/, /sin internet/, /guardar archivos/, /acceder sin conexion/],
        answer: `
          <div class="respuesta-bloque">
            <b>Descargar materiales para usar sin conexi√≥n:</b>
            <ol>
              <li><strong>Desde la web:</strong>
                <ul>
                  <li>Entra al curso y localiza el material (P√°ginas, Archivos PDF, Videos).</li>
                  <li>Haz clic derecho en el enlace del archivo y selecciona <b>"Guardar enlace como..."</b>.</li>
                  <li>Guarda en una carpeta organizada en tu computadora.</li>
                </ul>
              </li>
              <li><strong>Desde la app m√≥vil:</strong>
                <ul>
                  <li>Abre el curso en la app de Moodle.</li>
                  <li>Toca el icono <b>‚ãÆ (m√°s opciones)</b> junto al nombre del curso.</li>
                  <li>Selecciona <b>"Descargar para offline"</b>.</li>
                  <li>La app guardar√° autom√°ticamente todos los materiales del curso.</li>
                </ul>
              </li>
              <li><strong>Materiales que funcionan offline:</strong>
                <ul>
                  <li>Documentos PDF, Word, Excel</li>
                  <li>Im√°genes y gr√°ficos</li>
                  <li>Videos (si los descargas directamente)</li>
                  <li>P√°ginas HTML est√°ticas</li>
                </ul>
              </li>
              <li><strong>Qu√© NO funciona offline:</strong>
                <ul>
                  <li>Cuestionarios y actividades interactivas</li>
                  <li>Foros y discusiones</li>
                  <li>Contenidos H5P complejos</li>
                  <li>Calificaciones y retroalimentaci√≥n</li>
                </ul>
              </li>
              <li><strong>Organizaci√≥n:</strong> Usa carpetas por curso y fecha para encontrar r√°pido tus materiales.</li>
            </ol>
            <div class="boton-video">
              <a href="https://www.youtube.com/watch?v=descargar_offline" target="_blank" rel="noopener nofollow"
                style="display:inline-block;padding:8px 12px;border-radius:8px;background:#1f57b6;color:#fff;text-decoration:none;font-weight:600;">
                üé• Ver video: Descargar materiales offline
              </a>
            </div>
          </div>
        `
      }



      ];

      // --- UI wiring ---
      const msgs = document.getElementById('nc-msgs');
      // ‚õ≥Ô∏è eliminamos la l√≠nea que declaraba 'form' (ya no se usa)
      const input = document.getElementById('nc-input'); // ‚Üê una sola vez
      const sendBtn = document.getElementById('nc-send');

      const typeMessage = text => {
        let i = 0;
        const div = document.createElement('div');
        div.className = 'mensaje-inicial'; // Usamos clase para aplicar estilos din√°micos
        msgs.appendChild(div);

        const interval = setInterval(() => {
          div.innerHTML = text.substring(0, i) +
            "<span class='cursor-escribiendo'></span>";
          i++;
          msgs.scrollTop = msgs.scrollHeight;
          if (i > text.length) {
            clearInterval(interval);
            div.innerHTML = text;
          }
        }, 30);
      };
      typeMessage("üëã ¬°Hola! Soy el Chatbot TAC. Preg√∫ntame sobre el proyecto, la Unidad TAC o el calendario acad√©mico.");



      let typingEl = null;

        function showTyping(){
          // crea una burbuja de bot con puntos animados
          const html = `<span class="nc-typing">
                          <span class="nc-dot-typing"></span>
                          <span class="nc-dot-typing"></span>
                          <span class="nc-dot-typing"></span>
                        </span>`;
          const el = document.createElement('div');
          el.className = 'nc-bubble nc-bot';
          el.innerHTML = html;
          document.getElementById('nc-msgs').appendChild(el);
          document.getElementById('nc-msgs').scrollTop = document.getElementById('nc-msgs').scrollHeight;
          typingEl = el;
        }

        function hideTyping(){
          if(typingEl && typingEl.parentNode){
            typingEl.parentNode.removeChild(typingEl);
            typingEl = null;
          }
        }


        // --- Tema claro/oscuro ---
        const ncRoot  = document.getElementById('nc-bot'); // tiene la clase "nc"
        const themeBtn= document.getElementById('nc-theme');

        function applyTheme(theme){
          if (theme === 'dark') {
            ncRoot.classList.add('nc-dark');
            themeBtn.textContent = '‚òÄÔ∏è Modo claro';
            themeBtn.setAttribute('aria-pressed','true');
          } else {
            ncRoot.classList.remove('nc-dark');
            themeBtn.textContent = 'üåô Modo oscuro';
            themeBtn.setAttribute('aria-pressed','false');
          }
          localStorage.setItem('ncTheme', theme);
        }

        // Preferencia inicial: guardada o del sistema
        const savedTheme = localStorage.getItem('ncTheme');
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        applyTheme(savedTheme ? savedTheme : (prefersDark ? 'dark' : 'light'));

        // Toggle al hacer click (chat)
        themeBtn.addEventListener('click', ()=>{
          const isDark = ncRoot.classList.contains('nc-dark');
          applyTheme(isDark ? 'light' : 'dark');
        });
        // Toggle al hacer click (faq)
        const themeBtnFaq = document.getElementById('themeToggleFaq');
        if (themeBtnFaq) {
          themeBtnFaq.addEventListener('click', ()=>{
            const isDark = ncRoot.classList.contains('nc-dark');
            applyTheme(isDark ? 'light' : 'dark');
          });
        }

        // Navegaci√≥n entre vistas (pantallas exclusivas)
        const viewChat = document.getElementById('view-chat');
        const viewFaq  = document.getElementById('view-faq');
        const toFaqBtn = document.getElementById('toFaq');
        const backBtn  = document.getElementById('backToBot');

        function swapViews(hideEl, showEl, focusEl){
          if (!hideEl || !showEl) return;
          // salida
          hideEl.classList.add('fade-exit');
          requestAnimationFrame(()=>{
            hideEl.classList.add('fade-exit-active');
            setTimeout(()=>{
              hideEl.classList.remove('fade-exit','fade-exit-active');
              hideEl.classList.remove('active');
              hideEl.setAttribute('aria-hidden','true');
              // entrada
              showEl.classList.add('active','fade-enter');
              showEl.setAttribute('aria-hidden','false');
              requestAnimationFrame(()=>{
                showEl.classList.add('fade-enter-active');
                setTimeout(()=>{
                  showEl.classList.remove('fade-enter','fade-enter-active');
                }, 260);
              });
              if (focusEl) setTimeout(()=> focusEl.focus(), 0);
              window.scrollTo({ top: 0, behavior: 'instant' });
            }, 200);
          });
        }

        if (toFaqBtn) {
          toFaqBtn.addEventListener('click', ()=>{
            const faqTitle = document.getElementById('faqTitle');
            swapViews(viewChat, viewFaq, faqTitle);
          });
        }
        if (backBtn) {
          backBtn.addEventListener('click', ()=>{
            swapViews(viewFaq, viewChat, themeBtn);
          });
        }

        // FAQ: l√≥gica de secciones y expandir/contraer
        const sectionStudent = document.getElementById('estudiante');
        const sectionTeacher = document.getElementById('docente');
        const expandAllBtn = document.getElementById('expandAllBtn');
        const collapseAllBtn = document.getElementById('collapseAllBtn');

        window.showSection = function(name){
          if (name === 'estudiante'){
            sectionStudent.classList.add('active');
            sectionTeacher.classList.remove('active');
            localStorage.setItem('activeRole','estudiante');
          } else {
            sectionTeacher.classList.add('active');
            sectionStudent.classList.remove('active');
            localStorage.setItem('activeRole','docente');
          }
          // desplaza a inicio de la secci√≥n
          const el = name==='estudiante'?sectionStudent:sectionTeacher;
          el.scrollIntoView({behavior:'smooth', block:'start'});
        };

        function toggleDetails(container, open){
          const details = container.querySelectorAll('details');
          details.forEach(d=>{ d.open = open; });
        }
        if (expandAllBtn){
          expandAllBtn.addEventListener('click', ()=>{
            const role = localStorage.getItem('activeRole')||'estudiante';
            toggleDetails(role==='estudiante'?sectionStudent:sectionTeacher, true);
          });
        }
        if (collapseAllBtn){
          collapseAllBtn.addEventListener('click', ()=>{
            const role = localStorage.getItem('activeRole')||'estudiante';
            toggleDetails(role==='estudiante'?sectionStudent:sectionTeacher, false);
          });
        }

        // FAQ: buscador con sugerencias y resaltado b√°sico
        const searchInput = document.getElementById('searchInput');
        const suggestions = document.getElementById('questions-suggestions');

        function normalize(s){
          return (s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').trim();
        }
        function highlight(text, query){
          if (!query) return text;
          const q = normalize(query);
          const idx = normalize(text).indexOf(q);
          if (idx === -1) return text;
          return text.substring(0, idx) + '<span class="highlight">' + text.substring(idx, idx+query.length) + '</span>' + text.substring(idx+query.length);
        }
        function collectQuestions(){
          const items = [];
          [sectionStudent, sectionTeacher].forEach(sec=>{
            if(!sec) return;
            sec.querySelectorAll('details > summary').forEach(sum=>{
              items.push({summary: sum, text: sum.textContent.trim(), section: sec});
            });
          });
          return items;
        }
        const allQuestions = collectQuestions();

        function renderSuggestions(list){
          if(!suggestions) return;
          suggestions.innerHTML = '';
          if (!list.length){ suggestions.style.display='none'; return; }
          suggestions.style.display='block';
          list.slice(0, 8).forEach(item=>{
            const div = document.createElement('div');
            div.className = 'suggestion-item';
            div.innerHTML = highlight(item.text, searchInput.value);
            div.addEventListener('click', ()=>{
              if (item.section === sectionStudent) showSection('estudiante'); else showSection('docente');
              const details = item.summary.parentElement;
              details.open = true;
              details.scrollIntoView({behavior:'smooth', block:'start'});
              searchInput.value = '';
              suggestions.style.display='none';
            });
            suggestions.appendChild(div);
          });
        }

        if (searchInput && suggestions){
          searchInput.addEventListener('input', ()=>{
            const q = normalize(searchInput.value);
            if (!q){ 
              suggestions.style.display='none'; 
              suggestions.innerHTML=''; 
              return; 
            }
            const matches = allQuestions.filter(it=> normalize(it.text).includes(q));
            renderSuggestions(matches);
          });
          searchInput.addEventListener('focus', ()=>{
            const q = normalize(searchInput.value);
            if(q){
              const matches = allQuestions.filter(it=> normalize(it.text).includes(q));
              renderSuggestions(matches);
            }
          });
          document.addEventListener('click', (e)=>{
            if (!suggestions.contains(e.target) && e.target !== searchInput){
              suggestions.style.display='none';
            }
          });
        }

        // restaurar rol activo
        const savedRole = localStorage.getItem('activeRole') || 'estudiante';
        showSection(savedRole);

        // Cerrar otros details al abrir uno nuevo
        [sectionStudent, sectionTeacher].forEach(section => {
          if(!section) return;
          section.addEventListener('click', (e) => {
            const summary = e.target.closest('summary');
            if(summary) {
              const clickedDetail = summary.parentElement;
              if(!clickedDetail.open) {
                section.querySelectorAll('details[open]').forEach(d => {
                  if(d !== clickedDetail) d.open = false;
                });
              }
            }
          });
        });



      const bubble = (html, who) => {
        const p = document.createElement('div');
        p.className = 'nc-bubble ' + (who === 'me' ? 'nc-me' : 'nc-bot');
        p.innerHTML = html;
        const msgs = document.getElementById('nc-msgs');
        msgs.appendChild(p);
        msgs.scrollTop = msgs.scrollHeight;
        return p; // ‚Üê ahora devolvemos el elemento
      };



      // Funci√≥n para extraer respuestas del FAQ en tiempo real
      function extractFaqAnswer(text) {
        const q = norm(text);
        const faqRoot = document.getElementById('view-faq');
        if (!faqRoot) return null;

        const allDetails = faqRoot.querySelectorAll('details');
        let bestMatch = null;
        let bestScore = 0;

        for (const detail of allDetails) {
          const summary = detail.querySelector('summary');
          const answer = detail.querySelector('.answer');
          
          if (summary && answer) {
            const questionText = norm(summary.textContent);
            
            // Calcular score de coincidencia
            const words = q.split(' ').filter(w => w.length > 2);
            let score = 0;
            
            words.forEach(word => {
              if (questionText.includes(word)) score++;
            });
            
            // Si coincide con m√°s del 40% de las palabras
            if (score > 0 && score / words.length > 0.4 && score > bestScore) {
              bestScore = score;
              bestMatch = {
                id: 'faq_match',
                answer: answer.innerHTML
              };
            }
          }
        }
        
        return bestMatch;
      }

      const matchIntent = text => {
        const q = norm(text);
        
        // Primero intentar encontrar en el FAQ
        const faqMatch = extractFaqAnswer(text);
        if (faqMatch) return faqMatch;
        
        // Si no se encuentra en FAQ, buscar en intents predefinidos
        for (const intent of INTENTS) {
          if (intent.patterns.some(rx => rx.test(q))) return intent;
        }
        return null;
      };

      function renderSuggestions(intentId, bubbleEl){
        const items = SUGGESTIONS[intentId];
        if (!items || !items.length || !bubbleEl) return;
        const wrap = document.createElement('div');
        wrap.className = 'nc-suggest';
        items.forEach(it=>{
          const b = document.createElement('button');
          b.type = 'button';
          b.className = 'nc-chip';
          b.textContent = it.label;
          b.addEventListener('click', ()=> sendText(it.q));
          wrap.appendChild(b);
        });
        bubbleEl.appendChild(wrap);
      }

      function renderMedia(intentId, bubbleEl){
        const m = MEDIA[intentId];
        if (!m || !m.img) return;
        const box = document.createElement('div');
        box.className = 'nc-media';
        box.innerHTML = `<img src="${m.img}" alt="${m.alt || ''}">`;
        bubbleEl.appendChild(box);
      }



      function handleSend() {
      const t = input.value.trim();
      if (!t) return;
      bubble(t, 'me');
      input.value = '';

      showTyping();
      setTimeout(() => {
        try {
          const intent = matchIntent(t);
          hideTyping();
          if (intent) {
            const el = bubble(intent.answer, 'bot');     // ‚Üê guardamos el nodo
            renderSuggestions(intent.id, el);  
            renderMedia(intent.id, el);          
          } else {
            bubble("<i>No tengo esa respuesta a√∫n. Prueba con: ‚Äúproyecto‚Äù, ‚Äúunidad TAC‚Äù, ‚Äúcalendario acad√©mico‚Äù o ‚Äúsoporte plataformas‚Äù.</i>", 'bot');
          }
        } catch (err) {
          hideTyping();
          bubble(`<span style="color:#b00020">‚ö†Ô∏è Error: ${err.message}</span>`, 'bot');
          console.error(err);
        }
}, 500);
 // puedes subir un poco el delay para que se note el typing
    }


      sendBtn.addEventListener('click', handleSend);

      // Utilidad para enviar texto program√°ticamente
        function sendText(t){
          bubble(t,'me');
          input.value = '';
          showTyping();
          setTimeout(()=>{
            try{
              const intent = matchIntent(t);
              hideTyping();
              if (intent) {
                const el = bubble(intent.answer,'bot');
                renderSuggestions(intent.id, el);
                renderMedia(intent.id, el);
              } else {
                bubble("<i>No tengo esa respuesta a√∫n. Prueba con: ‚Äúproyecto‚Äù, ‚Äúunidad TAC‚Äù, ‚Äúcalendario acad√©mico‚Äù o ‚Äúsoporte plataformas‚Äù.</i>", 'bot');
              }
            }catch(err){
              hideTyping();
              bubble(`<span style="color:#b00020">‚ö†Ô∏è Error: ${err.message}</span>`,'bot');
              console.error(err);
            }
          }, 500);

        }


        // Listeners de chips
        document.querySelectorAll('.nc-chip').forEach(ch=>{
          ch.addEventListener('click', ()=>{
            const q = ch.getAttribute('data-q') || '';
            if(q) sendText(q);
          });
        });

      // Autocompletado del chat
      (function(){
        const inputEl = document.getElementById('nc-input');
        const list = document.getElementById('chat-suggestions');
        let allChatHints = [];
        let activeIndex = -1;

        function normalize(s){ return (s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').trim(); }

        // Construir cat√°logo: labels/q de SUGGESTIONS + t√≠tulos del FAQ
        function collectFaqTitles(){
          const titles = [];
          const faqRoot = document.getElementById('view-faq');
          if(!faqRoot) return titles;
          faqRoot.querySelectorAll('details > summary').forEach(sum=>{
            const text = sum.textContent.trim();
            titles.push({label: text, q: text});
          });
          return titles;
        }
        function collectSuggestionPairs(){
          const items = [];
          try {
            const keys = Object.keys(SUGGESTIONS||{});
            keys.forEach(k=>{
              (SUGGESTIONS[k]||[]).forEach(it=>{ if(it && it.q){ items.push({label: it.label||it.q, q: it.q}); } });
            });
          } catch(_){}
          return items;
        }
        function buildCatalog(){
          const a = collectSuggestionPairs();
          const b = collectFaqTitles();
          // deduplicar por q
          const seen = new Set();
          const merged = [];
          [...a, ...b].forEach(it=>{
            const key = it.q;
            if(!seen.has(key)) { seen.add(key); merged.push(it); }
          });
          allChatHints = merged;
        }
        buildCatalog();

        function render(items){
          if(!items.length){ list.style.display='none'; list.innerHTML=''; activeIndex=-1; return; }
          list.innerHTML = items.map((it,i)=>`<div class="nc-suggest-item${i===0?' active':''}" data-q="${it.q.replace(/"/g,'&quot;')}">${it.label}</div>`).join('');
          list.style.display='block';
          activeIndex = 0;
          Array.from(list.children).forEach((node, idx)=>{
            node.addEventListener('mouseenter', ()=> setActive(idx));
            node.addEventListener('mousedown', (ev)=>{ ev.preventDefault(); completeAndSend(idx); });
          });
        }
        function setActive(idx){
          const nodes = Array.from(list.children);
          nodes.forEach(n=> n.classList.remove('active'));
          if(idx>=0 && idx<nodes.length){ nodes[idx].classList.add('active'); activeIndex=idx; }
        }
        function completeAndSend(idx){
          const nodes = Array.from(list.children);
          if(!nodes.length) return;
          const node = nodes[idx>=0?idx:0];
          const q = node.getAttribute('data-q') || node.textContent.trim();
          list.style.display='none'; list.innerHTML=''; activeIndex=-1;
          if(q){ inputEl.value = q; handleSend(); }
        }

        inputEl.addEventListener('input', ()=>{
          const q = normalize(inputEl.value);
          if(!q){ list.style.display='none'; list.innerHTML=''; return; }
          const filtered = allChatHints.filter(it=> normalize(it.label).includes(q) || normalize(it.q).includes(q)).slice(0,8);
          render(filtered);
        });
        inputEl.addEventListener('keydown', (e)=>{
          const visible = list.style.display==='block';
          if(!visible){
            if(e.key==='Enter'){ e.preventDefault(); handleSend(); }
            return;
          }
          const nodes = Array.from(list.children);
          if(e.key==='ArrowDown'){ e.preventDefault(); setActive(Math.min(nodes.length-1, activeIndex+1)); }
          else if(e.key==='ArrowUp'){ e.preventDefault(); setActive(Math.max(0, activeIndex-1)); }
          else if(e.key==='Enter'){ e.preventDefault(); completeAndSend(activeIndex); }
          else if(e.key==='Escape'){ list.style.display='none'; list.innerHTML=''; activeIndex=-1; }
        });
        document.addEventListener('click', (e)=>{ if(!list.contains(e.target) && e.target!==inputEl){ list.style.display='none'; }});
      })();

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          handleSend();
        }
      });
    })();
  </script>
</p>

